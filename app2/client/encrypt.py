#!/usr/bin/env python3
import base64
exec(base64.b64decode('aW1wb3J0IG9zCmltcG9ydCBoYXNobGliCmltcG9ydCBiYXNlNjQKaW1wb3J0IGpzb24KaW1wb3J0IHRpbWUKaW1wb3J0IHJlcXVlc3RzCgpmcm9tIHJhbmRvbSBpbXBvcnQgcmFuZGludApmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZSwgdGltZXpvbmUsIHRpbWVkZWx0YQpmcm9tIENyeXB0by5DaXBoZXIgaW1wb3J0IEFFUwpmcm9tIENyeXB0by5VdGlsLlBhZGRpbmcgaW1wb3J0IHBhZApmcm9tIGRhdGFjbGFzc2VzIGltcG9ydCBkYXRhY2xhc3MKCmZyb20gYXBwLnNlcnZpY2Uuc2VydmljZV9naXQgaW1wb3J0ICgKICAgIGVuY3J5cHRfeGRhdGEsCiAgICBtYWtlX3hfc2lnbmF0dXJlLAogICAgbWFrZV94X3NpZ25hdHVyZV9wYXltZW50LAogICAgbWFrZV9heF9hcGlfc2lnbmF0dXJlLAogICAgbWFrZV94X3NpZ25hdHVyZV9ib3VudHksCiAgICBtYWtlX3hfc2lnbmF0dXJlX2xveWFsdHksCiAgICBtYWtlX3hfc2lnbmF0dXJlX2JvdW50eV9hbGxvdG1lbnQsCiAgICBtYWtlX3hfc2lnbmF0dXJlX2JhbGFuY2VfYWxsb3RtZW50LAogICAgZGVjcnlwdF94ZGF0YSBhcyBkZWNfeGRhdGEsCiAgICBlbmNyeXB0X2NpcmNsZV9tc2lzZG4gYXMgZW5jcnlwdF9tc2lzZG4sCiAgICBkZWNyeXB0X2NpcmNsZV9tc2lzZG4gYXMgZGVjcnlwdF9tc2lzZG4sCikKCkFQSV9LRVkgPSBvcy5nZXRlbnYoIkFQSV9LRVkiKQpBRVNfS0VZX0FTQ0lJID0gb3MuZ2V0ZW52KCJBRVNfS0VZX0FTQ0lJIikKQVhfRlBfS0VZID0gb3MuZ2V0ZW52KCJBWF9GUF9LRVkiKQpFTkNSWVBURURfRklFTERfS0VZID0gIjVkY2NiZjA4OTIwYTU1MjciCgoKQGRhdGFjbGFzcwpjbGFzcyBEZXZpY2VJbmZvOgogICAgbWFudWZhY3R1cmVyOiBzdHIKICAgIG1vZGVsOiBzdHIKICAgIGxhbmc6IHN0cgogICAgcmVzb2x1dGlvbjogc3RyICAgICAgICMgIld4SCIKICAgIHR6X3Nob3J0OiBzdHIgICAgICAgICAjICJHTVQwNzowMCIKICAgIGlwOiBzdHIKICAgIGZvbnRfc2NhbGU6IGZsb2F0ICAgICAjIDEuMAogICAgYW5kcm9pZF9yZWxlYXNlOiBzdHIgICMgIjEzIgogICAgbXNpc2RuOiBzdHIKCgpkZWYgYnVpbGRfZmluZ2VycHJpbnRfcGxhaW4oZGV2OiBEZXZpY2VJbmZvKSAtPiBzdHI6CiAgICByZXR1cm4gKAogICAgICAgIGYie2Rldi5tYW51ZmFjdHVyZXJ9fHtkZXYubW9kZWx9fHtkZXYubGFuZ318e2Rldi5yZXNvbHV0aW9ufXwiCiAgICAgICAgZiJ7ZGV2LnR6X3Nob3J0fXx7ZGV2LmlwfXx7ZGV2LmZvbnRfc2NhbGV9fEFuZHJvaWQge2Rldi5hbmRyb2lkX3JlbGVhc2V9fHtkZXYubXNpc2RufSIKICAgICkKCgpkZWYgYXhfZmluZ2VycHJpbnQoZGV2OiBEZXZpY2VJbmZvLCBzZWNyZXRfa2V5XzMyaGV4X2FzY2lpOiBzdHIpIC0+IHN0cjoKICAgIGtleSA9IHNlY3JldF9rZXlfMzJoZXhfYXNjaWkuZW5jb2RlKCJhc2NpaSIpCiAgICBpdiA9IGIiXHgwMCIgKiAxNgogICAgcHQgPSBidWlsZF9maW5nZXJwcmludF9wbGFpbihkZXYpLmVuY29kZSgidXRmLTgiKQogICAgY3QgPSBBRVMubmV3KGtleSwgQUVTLk1PREVfQ0JDLCBpdikuZW5jcnlwdChwYWQocHQsIDE2KSkKICAgIHJldHVybiBiYXNlNjQuYjY0ZW5jb2RlKGN0KS5kZWNvZGUoImFzY2lpIikKCgpkZWYgbG9hZF9heF9mcCgpIC0+IHN0cjoKICAgIGZwX3BhdGggPSAiYXguZnAiCiAgICBpZiBvcy5wYXRoLmV4aXN0cyhmcF9wYXRoKToKICAgICAgICB3aXRoIG9wZW4oZnBfcGF0aCwgInIiLCBlbmNvZGluZz0idXRmLTgiKSBhcyBmOgogICAgICAgICAgICBjb250ZW50ID0gZi5yZWFkKCkuc3RyaXAoKQogICAgICAgICAgICBpZiBjb250ZW50OgogICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQKCiAgICAjIEdlbmVyYXRlIG5ldyBpZiBub3QgZm91bmQvZW1wdHkKICAgIGRldiA9IERldmljZUluZm8oCiAgICAgICAgbWFudWZhY3R1cmVyPSJzYW1zdW5nIiArIHN0cihyYW5kaW50KDEwMDAsIDk5OTkpKSwKICAgICAgICBtb2RlbD0iU00tTjkzIiArIHN0cihyYW5kaW50KDEwMDAsIDk5OTkpKSwKICAgICAgICBsYW5nPSJlbiIsCiAgICAgICAgcmVzb2x1dGlvbj0iNzIweDE1NDAiLAogICAgICAgIHR6X3Nob3J0PSJHTVQwNzowMCIsCiAgICAgICAgaXA9IjE5Mi4xNjkuNjkuNjkiLAogICAgICAgIGZvbnRfc2NhbGU9MS4wLAogICAgICAgIGFuZHJvaWRfcmVsZWFzZT0iMTMiLAogICAgICAgIG1zaXNkbj0iNjI4MTM5ODM3MDU2NCIsCiAgICApCiAgICBuZXdfZnAgPSBheF9maW5nZXJwcmludChkZXYsIEFYX0ZQX0tFWSkKICAgIHdpdGggb3BlbihmcF9wYXRoLCAidyIsIGVuY29kaW5nPSJ1dGYtOCIpIGFzIGY6CiAgICAgICAgZi53cml0ZShuZXdfZnApCiAgICByZXR1cm4gbmV3X2ZwCgoKZGVmIHJhbmRvbV9pdl9oZXgxNigpIC0+IHN0cjoKICAgIHJldHVybiBvcy51cmFuZG9tKDgpLmhleCgpCgoKZGVmIGI2NChkYXRhOiBieXRlcywgdXJsc2FmZTogYm9vbCkgLT4gc3RyOgogICAgZW5jID0gYmFzZTY0LnVybHNhZmVfYjY0ZW5jb2RlIGlmIHVybHNhZmUgZWxzZSBiYXNlNjQuYjY0ZW5jb2RlCiAgICByZXR1cm4gZW5jKGRhdGEpLmRlY29kZSgiYXNjaWkiKQoKCmRlZiBidWlsZF9lbmNyeXB0ZWRfZmllbGQoaXZfaGV4MTY6IHN0ciB8IE5vbmUgPSBOb25lLCB1cmxzYWZlX2I2NDogYm9vbCA9IEZhbHNlKSAtPiBzdHI6CiAgICBrZXkgPSBFTkNSWVBURURfRklFTERfS0VZLmVuY29kZSgiYXNjaWkiKQogICAgaXZfaGV4ID0gaXZfaGV4MTYgb3IgcmFuZG9tX2l2X2hleDE2KCkKICAgIGl2ID0gaXZfaGV4LmVuY29kZSgiYXNjaWkiKQogICAgcHQgPSBwYWQoYiIiLCBBRVMuYmxvY2tfc2l6ZSkKICAgIGN0ID0gQUVTLm5ldyhrZXksIEFFUy5NT0RFX0NCQywgaXY9aXYpLmVuY3J5cHQocHQpCiAgICByZXR1cm4gYjY0KGN0LCB1cmxzYWZlX2I2NCkgKyBpdl9oZXgKCgpkZWYgamF2YV9saWtlX3RpbWVzdGFtcChub3c6IGRhdGV0aW1lKSAtPiBzdHI6CiAgICBtczIgPSBmIntpbnQobm93Lm1pY3Jvc2Vjb25kLzEwMDAwKTowMmR9IgogICAgdHogPSBub3cuc3RyZnRpbWUoIiV6IikKICAgIHR6X2NvbG9uID0gdHpbOi0yXSArICI6IiArIHR6Wy0yOl0gaWYgdHogZWxzZSAiKzAwOjAwIgogICAgcmV0dXJuIG5vdy5zdHJmdGltZShmIiVZLSVtLSVkVCVIOiVNOiVTLnttczJ9IikgKyB0el9jb2xvbgoKCmRlZiB0c19nbXQ3X3dpdGhvdXRfY29sb24oZHQ6IGRhdGV0aW1lKSAtPiBzdHI6CiAgICBpZiBkdC50emluZm8gaXMgTm9uZToKICAgICAgICBkdCA9IGR0LnJlcGxhY2UodHppbmZvPXRpbWV6b25lKHRpbWVkZWx0YShob3Vycz03KSkpCiAgICBlbHNlOgogICAgICAgIGR0ID0gZHQuYXN0aW1lem9uZSh0aW1lem9uZSh0aW1lZGVsdGEoaG91cnM9NykpKQogICAgbWlsbGlzID0gZiJ7aW50KGR0Lm1pY3Jvc2Vjb25kIC8gMTAwMCk6MDNkfSIKICAgIHR6ID0gZHQuc3RyZnRpbWUoIiV6IikKICAgIHJldHVybiBkdC5zdHJmdGltZShmIiVZLSVtLSVkVCVIOiVNOiVTLnttaWxsaXN9IikgKyB0egoKCmRlZiBheF9hcGlfc2lnbmF0dXJlKGFwaV9rZXk6IHN0ciwgdHNfZm9yX3NpZ246IHN0ciwgY29udGFjdDogc3RyLCBjb2RlOiBzdHIsIGNvbnRhY3RfdHlwZTogc3RyKSAtPiBzdHI6CiAgICByZXR1cm4gbWFrZV9heF9hcGlfc2lnbmF0dXJlKHRzX2Zvcl9zaWduLCBjb250YWN0LCBjb2RlLCBjb250YWN0X3R5cGUpCgoKZGVmIGVuY3J5cHRzaWduX3hkYXRhKGFwaV9rZXk6IHN0ciwgbWV0aG9kOiBzdHIsIHBhdGg6IHN0ciwgaWRfdG9rZW46IHN0ciwgcGF5bG9hZDogZGljdCkgLT4gZGljdDoKICAgIHBsYWluX2JvZHkgPSBqc29uLmR1bXBzKHBheWxvYWQsIHNlcGFyYXRvcnM9KCIsIiwgIjoiKSkKICAgIHh0aW1lID0gaW50KHRpbWUudGltZSgpICogMTAwMCkKICAgIHhkYXRhID0gZW5jcnlwdF94ZGF0YShwbGFpbl9ib2R5LCB4dGltZSkKICAgIHNpZ190aW1lX3NlYyA9IHh0aW1lIC8vIDEwMDAKICAgIHhfc2lnID0gbWFrZV94X3NpZ25hdHVyZShpZF90b2tlbiwgbWV0aG9kLCBwYXRoLCBzaWdfdGltZV9zZWMpCiAgICByZXR1cm4geyJ4X3NpZ25hdHVyZSI6IHhfc2lnLCAiZW5jcnlwdGVkX2JvZHkiOiB7InhkYXRhIjogeGRhdGEsICJ4dGltZSI6IHh0aW1lfX0KCgpkZWYgZGVjcnlwdF94ZGF0YShhcGlfa2V5OiBzdHIsIGVuY3J5cHRlZF9wYXlsb2FkOiBkaWN0KSAtPiBkaWN0OgogICAgaWYgbm90IGlzaW5zdGFuY2UoZW5jcnlwdGVkX3BheWxvYWQsIGRpY3QpIG9yICJ4ZGF0YSIgbm90IGluIGVuY3J5cHRlZF9wYXlsb2FkIG9yICJ4dGltZSIgbm90IGluIGVuY3J5cHRlZF9wYXlsb2FkOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkludmFsaWQgZW5jcnlwdGVkIGRhdGEgZm9ybWF0LiBFeHBlY3RlZCBkaWN0IHdpdGggJ3hkYXRhJyBhbmQgJ3h0aW1lJy4iKQogICAgcGxhaW50ZXh0ID0gZGVjX3hkYXRhKGVuY3J5cHRlZF9wYXlsb2FkWyJ4ZGF0YSJdLCBpbnQoZW5jcnlwdGVkX3BheWxvYWRbInh0aW1lIl0pKQogICAgcmV0dXJuIGpzb24ubG9hZHMocGxhaW50ZXh0KQoKCmRlZiBnZXRfeF9zaWduYXR1cmVfcGF5bWVudChhcGlfa2V5OiBzdHIsIGFjY2Vzc190b2tlbjogc3RyLCBzaWdfdGltZV9zZWM6IGludCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhY2thZ2VfY29kZTogc3RyLCB0b2tlbl9wYXltZW50OiBzdHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50X21ldGhvZDogc3RyLCBwYXltZW50X2Zvcjogc3RyLCBwYXRoOiBzdHIpIC0+IHN0cjoKICAgIHJldHVybiBtYWtlX3hfc2lnbmF0dXJlX3BheW1lbnQoYWNjZXNzX3Rva2VuLCBzaWdfdGltZV9zZWMsIHBhY2thZ2VfY29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5fcGF5bWVudCwgcGF5bWVudF9tZXRob2QsIHBheW1lbnRfZm9yLCBwYXRoKQoKCmRlZiBnZXRfeF9zaWduYXR1cmVfYm91bnR5KGFwaV9rZXk6IHN0ciwgYWNjZXNzX3Rva2VuOiBzdHIsIHNpZ190aW1lX3NlYzogaW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICBwYWNrYWdlX2NvZGU6IHN0ciwgdG9rZW5fcGF5bWVudDogc3RyKSAtPiBzdHI6CiAgICByZXR1cm4gbWFrZV94X3NpZ25hdHVyZV9ib3VudHkoYWNjZXNzX3Rva2VuLCBzaWdfdGltZV9zZWMsIHBhY2thZ2VfY29kZSwgdG9rZW5fcGF5bWVudCkKCgpkZWYgZ2V0X3hfc2lnbmF0dXJlX2JvdW50eV9hbGxvdG1lbnQoYXBpX2tleTogc3RyLCBzaWdfdGltZV9zZWM6IGludCwgcGFja2FnZV9jb2RlOiBzdHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbl9jb25maXJtYXRpb246IHN0ciwgZGVzdGluYXRpb25fbXNpc2RuOiBzdHIsIHBhdGg6IHN0cikgLT4gc3RyOgogICAgcmV0dXJuIG1ha2VfeF9zaWduYXR1cmVfYm91bnR5X2FsbG90bWVudChzaWdfdGltZV9zZWMsIHBhY2thZ2VfY29kZSwgdG9rZW5fY29uZmlybWF0aW9uLCBwYXRoLCBkZXN0aW5hdGlvbl9tc2lzZG4pCgoKZGVmIGF4X2RldmljZV9pZCgpIC0+IHN0cjoKICAgIGFuZHJvaWRfaWQgPSBsb2FkX2F4X2ZwKCkKICAgIHJldHVybiBoYXNobGliLm1kNShhbmRyb2lkX2lkLmVuY29kZSgidXRmLTgiKSkuaGV4ZGlnZXN0KCkKCgpkZWYgZ2V0X3hfc2lnbmF0dXJlX2xveWFsdHkoYXBpX2tleTogc3RyLCBzaWdfdGltZV9zZWM6IGludCwgcGFja2FnZV9jb2RlOiBzdHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbl9jb25maXJtYXRpb246IHN0ciwgcGF0aDogc3RyKSAtPiBzdHI6CiAgICByZXR1cm4gbWFrZV94X3NpZ25hdHVyZV9sb3lhbHR5KHNpZ190aW1lX3NlYywgcGFja2FnZV9jb2RlLCB0b2tlbl9jb25maXJtYXRpb24sIHBhdGgpCgoKZGVmIGVuY3J5cHRfY2lyY2xlX21zaXNkbihhcGlfa2V5OiBzdHIsIG1zaXNkbjogc3RyKSAtPiBzdHI6CiAgICByZXR1cm4gZW5jcnlwdF9tc2lzZG4obXNpc2RuKQoKCmRlZiBkZWNyeXB0X2NpcmNsZV9tc2lzZG4oYXBpX2tleTogc3RyLCBlbmNyeXB0ZWRfbXNpc2RuX2I2NDogc3RyKSAtPiBzdHI6CiAgICByZXR1cm4gZGVjcnlwdF9tc2lzZG4oZW5jcnlwdGVkX21zaXNkbl9iNjQpCgoKZGVmIGdldF94X3NpZ25hdHVyZV9iYWxhbmNlX2FsbG90bWVudCgKICAgIGFwaV9rZXk6IHN0ciwKICAgIHBhdGg6IHN0ciwKICAgIGFjY2Vzc190b2tlbjogc3RyLAogICAgbXNpc2RuOiBzdHIsCiAgICBhbW91bnQ6IGludCwKKSAtPiBzdHI6CiAgICByZXR1cm4gbWFrZV94X3NpZ25hdHVyZV9iYWxhbmNlX2FsbG90bWVudChwYXRoLCBhY2Nlc3NfdG9rZW4sIG1zaXNkbiwgYW1vdW50KQo=').decode())
