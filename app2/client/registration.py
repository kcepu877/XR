#!/usr/bin/env python3
import base64
exec(base64.b64decode('aW1wb3J0IGpzb24KZnJvbSBhcHAyLmNsaWVudC5lbmdzZWwgaW1wb3J0IHNlbmRfYXBpX3JlcXVlc3QKZnJvbSBhcHAyLm1lbnVzLnV0aWwgaW1wb3J0IGxpdmVfbG9hZGluZywgcHJpbnRfcGFuZWwKZnJvbSBhcHAyLmNvbmZpZy50aGVtZV9jb25maWcgaW1wb3J0IGdldF90aGVtZQoKCmZyb20gYXBwMi5jbGllbnQuZW5nc2VsIGltcG9ydCBzZW5kX2FwaV9yZXF1ZXN0CgpkZWYgdmFsaWRhdGVfcHVrKAogICAgYXBpX2tleTogc3RyLAogICAgbXNpc2RuOiBzdHIsCiAgICBwdWs6IHN0ciwKKSAtPiBkaWN0OgogICAgcGF0aCA9ICJhcGkvdjgvaW5mb3MvdmFsaWRhdGUtcHVrIgoKICAgIHJhd19wYXlsb2FkID0gewogICAgICAgICJpc19lbnRlcnByaXNlIjogRmFsc2UsCiAgICAgICAgInB1ayI6IHB1aywKICAgICAgICAiaXNfZW5jIjogRmFsc2UsCiAgICAgICAgIm1zaXNkbiI6IG1zaXNkbiwKICAgICAgICAibGFuZyI6ICJlbiIKICAgIH0KCiAgICByZXMgPSBzZW5kX2FwaV9yZXF1ZXN0KGFwaV9rZXksIHBhdGgsIHJhd19wYXlsb2FkLCAiIiwgIlBPU1QiKQoKICAgIHJldHVybiByZXMKCmRlZiBkdWtjYXBpbCgKICAgIGFwaV9rZXk6IHN0ciwKICAgIG1zaXNkbjogc3RyLAogICAga2s6IHN0ciwKICAgIG5pazogc3RyLAopIC0+IGRpY3Q6CiAgICBwYXRoID0gImFwaS92OC9hdXRoL3JlZ2lzdC9kdWtjYXBpbCIKCiAgICByYXdfcGF5bG9hZCA9IHsKICAgICAgICAibXNpc2RuIjogbXNpc2RuLAogICAgICAgICJrayI6IGtrLAogICAgICAgICJuaWsiOiBuaWssCiAgICAgICAgImxhbmciOiAiZW4iCiAgICB9CgogICAgcmVzID0gc2VuZF9hcGlfcmVxdWVzdChhcGlfa2V5LCBwYXRoLCByYXdfcGF5bG9hZCwgIiIsICJQT1NUIikKCiAgICByZXR1cm4gcmVzCg==').decode())
