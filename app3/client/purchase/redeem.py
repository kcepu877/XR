#!/usr/bin/env python3
import base64
exec(base64.b64decode('aW1wb3J0IG9zCmltcG9ydCBqc29uCmltcG9ydCB1dWlkCmltcG9ydCByZXF1ZXN0cwpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZSwgdGltZXpvbmUKCmZyb20gYXBwMy5jbGllbnQuZW5nc2VsIGltcG9ydCBCQVNFX0FQSV9VUkwsIFVBCmZyb20gYXBwMy5jbGllbnQuZW5jcnlwdCBpbXBvcnQgKAogICAgQVBJX0tFWSwKICAgIGJ1aWxkX2VuY3J5cHRlZF9maWVsZCwKICAgIGRlY3J5cHRfeGRhdGEsCiAgICBlbmNyeXB0c2lnbl94ZGF0YSwKICAgIGdldF94X3NpZ25hdHVyZV9sb3lhbHR5LAogICAgamF2YV9saWtlX3RpbWVzdGFtcCwKICAgIGdldF94X3NpZ25hdHVyZV9ib3VudHksCiAgICBnZXRfeF9zaWduYXR1cmVfYm91bnR5X2FsbG90bWVudCwKKQpmcm9tIGFwcDMubWVudXMudXRpbCBpbXBvcnQgbGl2ZV9sb2FkaW5nLCBwcmludF9wYW5lbApmcm9tIGFwcDMuY29uZmlnLnRoZW1lX2NvbmZpZyBpbXBvcnQgZ2V0X3RoZW1lCgpCQVNFX0FQSV9VUkwgPSBvcy5nZXRlbnYoIkJBU0VfQVBJX1VSTCIpCkFYX0ZQID0gb3MuZ2V0ZW52KCJBWF9GUCIpClVBID0gb3MuZ2V0ZW52KCJVQSIpCgoKZGVmIHNldHRsZW1lbnRfYm91bnR5KGFwaV9rZXk6IHN0ciwgdG9rZW5zOiBkaWN0LAogICAgICAgICAgICAgICAgICAgICAgdG9rZW5fY29uZmlybWF0aW9uOiBzdHIsIHRzX3RvX3NpZ246IGludCwKICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRfdGFyZ2V0OiBzdHIsIHByaWNlOiBpbnQsCiAgICAgICAgICAgICAgICAgICAgICBpdGVtX25hbWU6IHN0ciA9ICIiKSAtPiBkaWN0IHwgTm9uZToKICAgIHBhdGggPSAiYXBpL3Y4L3BlcnNvbmFsaXphdGlvbi9ib3VudGllcy1leGNoYW5nZSIKICAgIHNldHRsZW1lbnRfcGF5bG9hZCA9IHsKICAgICAgICAidG90YWxfZGlzY291bnQiOiAwLAogICAgICAgICJpc19lbnRlcnByaXNlIjogRmFsc2UsCiAgICAgICAgInBheW1lbnRfbWV0aG9kIjogIkJBTEFOQ0UiLAogICAgICAgICJ0aW1lc3RhbXAiOiB0c190b19zaWduLAogICAgICAgICJwYXltZW50X2ZvciI6ICJSRURFRU1fVk9VQ0hFUiIsCiAgICAgICAgInRva2VuX2NvbmZpcm1hdGlvbiI6IHRva2VuX2NvbmZpcm1hdGlvbiwKICAgICAgICAiYWNjZXNzX3Rva2VuIjogdG9rZW5zWyJhY2Nlc3NfdG9rZW4iXSwKICAgICAgICAiZW5jcnlwdGVkX3BheW1lbnRfdG9rZW4iOiBidWlsZF9lbmNyeXB0ZWRfZmllbGQodXJsc2FmZV9iNjQ9VHJ1ZSksCiAgICAgICAgImVuY3J5cHRlZF9hdXRoZW50aWNhdGlvbl9pZCI6IGJ1aWxkX2VuY3J5cHRlZF9maWVsZCh1cmxzYWZlX2I2ND1UcnVlKSwKICAgICAgICAiaXRlbXMiOiBbewogICAgICAgICAgICAiaXRlbV9jb2RlIjogcGF5bWVudF90YXJnZXQsCiAgICAgICAgICAgICJpdGVtX3ByaWNlIjogcHJpY2UsCiAgICAgICAgICAgICJpdGVtX25hbWUiOiBpdGVtX25hbWUsCiAgICAgICAgICAgICJ0YXgiOiAwCiAgICAgICAgfV0KICAgIH0KCiAgICBlbmNyeXB0ZWRfcGF5bG9hZCA9IGVuY3J5cHRzaWduX3hkYXRhKGFwaV9rZXksICJQT1NUIiwgcGF0aCwgdG9rZW5zWyJpZF90b2tlbiJdLCBzZXR0bGVtZW50X3BheWxvYWQpCiAgICB4dGltZSA9IGludChlbmNyeXB0ZWRfcGF5bG9hZFsiZW5jcnlwdGVkX2JvZHkiXVsieHRpbWUiXSkKICAgIHNpZ190aW1lX3NlYyA9IHh0aW1lIC8vIDEwMDAKICAgIHhfcmVxdWVzdGVkX2F0ID0gZGF0ZXRpbWUuZnJvbXRpbWVzdGFtcChzaWdfdGltZV9zZWMsIHR6PXRpbWV6b25lLnV0YykuYXN0aW1lem9uZSgpCiAgICBib2R5ID0gZW5jcnlwdGVkX3BheWxvYWRbImVuY3J5cHRlZF9ib2R5Il0KCiAgICB4X3NpZyA9IGdldF94X3NpZ25hdHVyZV9ib3VudHkoYXBpX2tleSwgdG9rZW5zWyJhY2Nlc3NfdG9rZW4iXSwgdHNfdG9fc2lnbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50X3RhcmdldCwgdG9rZW5fY29uZmlybWF0aW9uKQoKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgImhvc3QiOiBCQVNFX0FQSV9VUkwucmVwbGFjZSgiaHR0cHM6Ly8iLCAiIiksCiAgICAgICAgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04IiwKICAgICAgICAidXNlci1hZ2VudCI6IFVBLAogICAgICAgICJ4LWFwaS1rZXkiOiBBUElfS0VZLAogICAgICAgICJhdXRob3JpemF0aW9uIjogZiJCZWFyZXIge3Rva2Vuc1snaWRfdG9rZW4nXX0iLAogICAgICAgICJ4LXNpZ25hdHVyZS10aW1lIjogc3RyKHNpZ190aW1lX3NlYyksCiAgICAgICAgIngtc2lnbmF0dXJlIjogeF9zaWcsCiAgICAgICAgIngtcmVxdWVzdC1pZCI6IHN0cih1dWlkLnV1aWQ0KCkpLAogICAgICAgICJ4LXJlcXVlc3QtYXQiOiBqYXZhX2xpa2VfdGltZXN0YW1wKHhfcmVxdWVzdGVkX2F0KSwKICAgICAgICAieC12ZXJzaW9uLWFwcCI6ICI4LjkuMSIsCiAgICB9CgogICAgdXJsID0gZiJ7QkFTRV9BUElfVVJMfS97cGF0aH0iCiAgICB3aXRoIGxpdmVfbG9hZGluZygi8J+OryBMYWdpIGtpcmltIGJvdW50eSByZXF1ZXN0IGJyby4uLiIsIGdldF90aGVtZSgpKToKICAgICAgICByZXNwID0gcmVxdWVzdHMucG9zdCh1cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGJvZHkpLCB0aW1lb3V0PTMwKQoKICAgIHRyeToKICAgICAgICBkZWNyeXB0ZWRfYm9keSA9IGRlY3J5cHRfeGRhdGEoYXBpX2tleSwganNvbi5sb2FkcyhyZXNwLnRleHQpKQogICAgICAgIHN0YXR1cyA9IGRlY3J5cHRlZF9ib2R5LmdldCgic3RhdHVzIiwgIlVOS05PV04iKQogICAgICAgIG1lc3NhZ2UgPSBkZWNyeXB0ZWRfYm9keS5nZXQoIm1lc3NhZ2UiLCAiIikKCiAgICAgICAgcHJpbnRfcGFuZWwoIvCfp74gQm91bnR5IFN0YXR1cyIsIGYiU3RhdHVzOiB7c3RhdHVzfVxuUGVzYW46IHttZXNzYWdlfSIpCiAgICAgICAgcmV0dXJuIHsic3RhdHVzIjogc3RhdHVzLCAibWVzc2FnZSI6IG1lc3NhZ2UsICJkYXRhIjogZGVjcnlwdGVkX2JvZHl9CiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnRfcGFuZWwoIvCfp74gQm91bnR5IFN0YXR1cyIsIGYi4pqg77iPIFVwc1xuUGVzYW46IEVycm9yIGRlY3J5cHQgYnJvIPCfpK8ge2V9IikKICAgICAgICByZXR1cm4geyJzdGF0dXMiOiAiRVJST1IiLCAibWVzc2FnZSI6IGYiRGVjcnlwdCBlcnJvcjoge2V9IiwgImRhdGEiOiBOb25lfQoKCmRlZiBzZXR0bGVtZW50X2xveWFsdHkoYXBpX2tleTogc3RyLCB0b2tlbnM6IGRpY3QsCiAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5fY29uZmlybWF0aW9uOiBzdHIsIHRzX3RvX3NpZ246IGludCwKICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50X3RhcmdldDogc3RyLCBwcmljZTogaW50KSAtPiBkaWN0IHwgTm9uZToKICAgIHBhdGggPSAiZ2FtaWZpY2F0aW9uL2FwaS92OC9sb3lhbHRpZXMvdGllcmluZy9leGNoYW5nZSIKICAgIHNldHRsZW1lbnRfcGF5bG9hZCA9IHsKICAgICAgICAiaXRlbV9jb2RlIjogcGF5bWVudF90YXJnZXQsCiAgICAgICAgInBvaW50cyI6IHByaWNlLAogICAgICAgICJ0aW1lc3RhbXAiOiB0c190b19zaWduLAogICAgICAgICJ0b2tlbl9jb25maXJtYXRpb24iOiB0b2tlbl9jb25maXJtYXRpb24sCiAgICAgICAgImlzX2VudGVycHJpc2UiOiBGYWxzZSwKICAgICAgICAibGFuZyI6ICJlbiIsCiAgICB9CgogICAgZW5jcnlwdGVkX3BheWxvYWQgPSBlbmNyeXB0c2lnbl94ZGF0YShhcGlfa2V5LCAiUE9TVCIsIHBhdGgsIHRva2Vuc1siaWRfdG9rZW4iXSwgc2V0dGxlbWVudF9wYXlsb2FkKQogICAgeHRpbWUgPSBpbnQoZW5jcnlwdGVkX3BheWxvYWRbImVuY3J5cHRlZF9ib2R5Il1bInh0aW1lIl0pCiAgICBzaWdfdGltZV9zZWMgPSB4dGltZSAvLyAxMDAwCiAgICB4X3JlcXVlc3RlZF9hdCA9IGRhdGV0aW1lLmZyb210aW1lc3RhbXAoc2lnX3RpbWVfc2VjLCB0ej10aW1lem9uZS51dGMpLmFzdGltZXpvbmUoKQogICAgYm9keSA9IGVuY3J5cHRlZF9wYXlsb2FkWyJlbmNyeXB0ZWRfYm9keSJdCgogICAgeF9zaWcgPSBnZXRfeF9zaWduYXR1cmVfbG95YWx0eShhcGlfa2V5LCB0c190b19zaWduLCBwYXltZW50X3RhcmdldCwgdG9rZW5fY29uZmlybWF0aW9uLCBwYXRoKQoKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgImhvc3QiOiBCQVNFX0FQSV9VUkwucmVwbGFjZSgiaHR0cHM6Ly8iLCAiIiksCiAgICAgICAgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04IiwKICAgICAgICAidXNlci1hZ2VudCI6IFVBLAogICAgICAgICJ4LWFwaS1rZXkiOiBBUElfS0VZLAogICAgICAgICJhdXRob3JpemF0aW9uIjogZiJCZWFyZXIge3Rva2Vuc1snaWRfdG9rZW4nXX0iLAogICAgICAgICJ4LXNpZ25hdHVyZS10aW1lIjogc3RyKHNpZ190aW1lX3NlYyksCiAgICAgICAgIngtc2lnbmF0dXJlIjogeF9zaWcsCiAgICAgICAgIngtcmVxdWVzdC1pZCI6IHN0cih1dWlkLnV1aWQ0KCkpLAogICAgICAgICJ4LXJlcXVlc3QtYXQiOiBqYXZhX2xpa2VfdGltZXN0YW1wKHhfcmVxdWVzdGVkX2F0KSwKICAgICAgICAieC12ZXJzaW9uLWFwcCI6ICI4LjkuMSIsCiAgICB9CgogICAgdXJsID0gZiJ7QkFTRV9BUElfVVJMfS97cGF0aH0iCiAgICB3aXRoIGxpdmVfbG9hZGluZygi8J+PhSBMYWdpIGtpcmltIGxveWFsdHkgcmVxdWVzdCBicm8uLi4iLCBnZXRfdGhlbWUoKSk6CiAgICAgICAgcmVzcCA9IHJlcXVlc3RzLnBvc3QodXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhib2R5KSwgdGltZW91dD0zMCkKCiAgICB0cnk6CiAgICAgICAgZGVjcnlwdGVkX2JvZHkgPSBkZWNyeXB0X3hkYXRhKGFwaV9rZXksIGpzb24ubG9hZHMocmVzcC50ZXh0KSkKICAgICAgICBzdGF0dXMgPSBkZWNyeXB0ZWRfYm9keS5nZXQoInN0YXR1cyIsICJVTktOT1dOIikKICAgICAgICBtZXNzYWdlID0gZGVjcnlwdGVkX2JvZHkuZ2V0KCJtZXNzYWdlIiwgIiIpCgogICAgICAgIHByaW50X3BhbmVsKCLwn4+GIExveWFsdHkgU3RhdHVzIiwgZiJTdGF0dXM6IHtzdGF0dXN9XG5QZXNhbjoge21lc3NhZ2V9IikKICAgICAgICByZXR1cm4geyJzdGF0dXMiOiBzdGF0dXMsICJtZXNzYWdlIjogbWVzc2FnZSwgImRhdGEiOiBkZWNyeXB0ZWRfYm9keX0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludF9wYW5lbCgi8J+PhiBMb3lhbHR5IFN0YXR1cyIsIGYi4pqg77iPIFVwc1xuUGVzYW46IEVycm9yIGRlY3J5cHQgYnJvIPCfpK8ge2V9IikKICAgICAgICByZXR1cm4geyJzdGF0dXMiOiAiRVJST1IiLCAibWVzc2FnZSI6IGYiRGVjcnlwdCBlcnJvcjoge2V9IiwgImRhdGEiOiBOb25lfQoKCmRlZiBib3VudHlfYWxsb3RtZW50KGFwaV9rZXk6IHN0ciwgdG9rZW5zOiBkaWN0LAogICAgICAgICAgICAgICAgICAgICB0c190b19zaWduOiBpbnQsIGRlc3RpbmF0aW9uX21zaXNkbjogc3RyLAogICAgICAgICAgICAgICAgICAgICBpdGVtX25hbWU6IHN0ciwgaXRlbV9jb2RlOiBzdHIsCiAgICAgICAgICAgICAgICAgICAgIHRva2VuX2NvbmZpcm1hdGlvbjogc3RyKSAtPiBkaWN0IHwgTm9uZToKICAgIHBhdGggPSAiZ2FtaWZpY2F0aW9uL2FwaS92OC9sb3lhbHRpZXMvdGllcmluZy9ib3VudGllcy1hbGxvdG1lbnQiCiAgICBzZXR0bGVtZW50X3BheWxvYWQgPSB7CiAgICAgICAgImRlc3RpbmF0aW9uX21zaXNkbiI6IGRlc3RpbmF0aW9uX21zaXNkbiwKICAgICAgICAiaXRlbV9jb2RlIjogaXRlbV9jb2RlLAogICAgICAgICJpdGVtX25hbWUiOiBpdGVtX25hbWUsCiAgICAgICAgInRpbWVzdGFtcCI6IGludChkYXRldGltZS5ub3coKS50aW1lc3RhbXAoKSksCiAgICAgICAgInRva2VuX2NvbmZpcm1hdGlvbiI6IHRva2VuX2NvbmZpcm1hdGlvbiwKICAgICAgICAiaXNfZW50ZXJwcmlzZSI6IEZhbHNlLAogICAgICAgICJsYW5nIjogImVuIiwKICAgIH0KCiAgICBlbmNyeXB0ZWRfcGF5bG9hZCA9IGVuY3J5cHRzaWduX3hkYXRhKGFwaV9rZXksICJQT1NUIiwgcGF0aCwgdG9rZW5zWyJpZF90b2tlbiJdLCBzZXR0bGVtZW50X3BheWxvYWQpCiAgICB4dGltZSA9IGludChlbmNyeXB0ZWRfcGF5bG9hZFsiZW5jcnlwdGVkX2JvZHkiXVsieHRpbWUiXSkKICAgIHNpZ190aW1lX3NlYyA9IHh0aW1lIC8vIDEwMDAKICAgIHhfcmVxdWVzdGVkX2F0ID0gZGF0ZXRpbWUuZnJvbXRpbWVzdGFtcChzaWdfdGltZV9zZWMsIHR6PXRpbWV6b25lLnV0YykuYXN0aW1lem9uZSgpCiAgICBib2R5ID0gZW5jcnlwdGVkX3BheWxvYWRbImVuY3J5cHRlZF9ib2R5Il0KCiAgICB4X3NpZyA9IGdldF94X3NpZ25hdHVyZV9ib3VudHlfYWxsb3RtZW50KGFwaV9rZXksIHRzX3RvX3NpZ24sIGl0ZW1fY29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5fY29uZmlybWF0aW9uLCBkZXN0aW5hdGlvbl9tc2lzZG4sIHBhdGgpCgogICAgaGVhZGVycyA9IHsKICAgICAgICAiaG9zdCI6IEJBU0VfQVBJX1VSTC5yZXBsYWNlKCJodHRwczovLyIsICIiKSwKICAgICAgICAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgiLAogICAgICAgICJ1c2VyLWFnZW50IjogVUEsCiAgICAgICAgIngtYXBpLWtleSI6IEFQSV9LRVksCiAgICAgICAgImF1dGhvcml6YXRpb24iOiBmIkJlYXJlciB7dG9rZW5zWydpZF90b2tlbiddfSIsCiAgICAgICAgIngtc2lnbmF0dXJlLXRpbWUiOiBzdHIoc2lnX3RpbWVfc2VjKSwKICAgICAgICAieC1zaWduYXR1cmUiOiB4X3NpZywKICAgICAgICAieC1yZXF1ZXN0LWlkIjogc3RyKHV1aWQudXVpZDQoKSksCiAgICAgICAgIngtcmVxdWVzdC1hdCI6IGphdmFfbGlrZV90aW1lc3RhbXAoeF9yZXF1ZXN0ZWRfYXQpLAogICAgICAgICJ4LXZlcnNpb24tYXBwIjogIjguOS4xIiwKICAgIH0KCiAgICB1cmwgPSBmIntCQVNFX0FQSV9VUkx9L3twYXRofSIKICAgIHdpdGggbGl2ZV9sb2FkaW5nKCLwn46vIExhZ2kga2lyaW0gYm91bnR5IGFsbG90bWVudCBicm8uLi4iLCBnZXRfdGhlbWUoKSk6CiAgICAgICAgcmVzcCA9IHJlcXVlc3RzLnBvc3QodXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhib2R5KSwgdGltZW91dD0zMCkKCiAgICB0cnk6CiAgICAgICAgZGVjcnlwdGVkX2JvZHkgPSBkZWNyeXB0X3hkYXRhKGFwaV9rZXksIGpzb24ubG9hZHMocmVzcC50ZXh0KSkKICAgICAgICBzdGF0dXMgPSBkZWNyeXB0ZWRfYm9keS5nZXQoInN0YXR1cyIsICJVTktOT1dOIikKICAgICAgICBtZXNzYWdlID0gZGVjcnlwdGVkX2JvZHkuZ2V0KCJtZXNzYWdlIiwgIiIpCgogICAgICAgIHByaW50X3BhbmVsKCLwn46BIEJvdW50eSBBbGxvdG1lbnQgU3RhdHVzIiwgZiJTdGF0dXM6IHtzdGF0dXN9XG5QZXNhbjoge21lc3NhZ2V9IikKICAgICAgICByZXR1cm4geyJzdGF0dXMiOiBzdGF0dXMsICJtZXNzYWdlIjogbWVzc2FnZSwgImRhdGEiOiBkZWNyeXB0ZWRfYm9keX0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludF9wYW5lbCgi8J+OgSBCb3VudHkgQWxsb3RtZW50IFN0YXR1cyIsIGYi4pqg77iPIFVwc1xuUGVzYW46IEVycm9yIGRlY3J5cHQgYnJvIPCfpK8ge2V9IikKICAgICAgICByZXR1cm4geyJzdGF0dXMiOiAiRVJST1IiLCAibWVzc2FnZSI6IGYiRGVjcnlwdCBlcnJvcjoge2V9IiwgImRhdGEiOiBOb25lfQo=').decode())
