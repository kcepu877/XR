#!/usr/bin/env python3
import base64
exec(base64.b64decode('aW1wb3J0IGpzb24KaW1wb3J0IHRpbWUKaW1wb3J0IHV1aWQKaW1wb3J0IHJlcXVlc3RzCmZyb20gZGF0ZXRpbWUgaW1wb3J0IHRpbWV6b25lLCBkYXRldGltZQoKZnJvbSBhcHAzLmNsaWVudC5lbmNyeXB0IGltcG9ydCAoCiAgICBBUElfS0VZLAogICAgYnVpbGRfZW5jcnlwdGVkX2ZpZWxkLAogICAgZGVjcnlwdF94ZGF0YSwKICAgIGVuY3J5cHRzaWduX3hkYXRhLAogICAgZ2V0X3hfc2lnbmF0dXJlX3BheW1lbnQsCiAgICBqYXZhX2xpa2VfdGltZXN0YW1wLAopCmZyb20gYXBwMy5jbGllbnQuZW5nc2VsIGltcG9ydCBCQVNFX0FQSV9VUkwsIFVBLCBpbnRlcmNlcHRfcGFnZSwgc2VuZF9hcGlfcmVxdWVzdApmcm9tIGFwcC50eXBlX2RpY3QgaW1wb3J0IFBheW1lbnRJdGVtCmZyb20gYXBwMy5tZW51cy51dGlsIGltcG9ydCBsaXZlX2xvYWRpbmcsIHByaW50X2Vycm9yLCBwcmludF9zdWNjZXNzLCBwcmludF9wYW5lbApmcm9tIGFwcDMuY29uZmlnLnRoZW1lX2NvbmZpZyBpbXBvcnQgZ2V0X3RoZW1lCgoKZGVmIHNldHRsZW1lbnRfYmFsYW5jZSgKICAgIGFwaV9rZXk6IHN0ciwKICAgIHRva2VuczogZGljdCwKICAgIGl0ZW1zOiBsaXN0W1BheW1lbnRJdGVtXSwKICAgIHBheW1lbnRfZm9yOiBzdHIsCiAgICBhc2tfb3ZlcndyaXRlOiBib29sLAogICAgb3ZlcndyaXRlX2Ftb3VudDogaW50ID0gLTEsCiAgICB0b2tlbl9jb25maXJtYXRpb25faWR4OiBpbnQgPSAwLAogICAgYW1vdW50X2lkeDogaW50ID0gLTEsCiAgICB0b3B1cF9udW1iZXI6IHN0ciA9ICIiLAogICAgc3RhZ2VfdG9rZW46IHN0ciA9ICIiLAopOgogICAgIyBTYW5pdHkgY2hlY2sKICAgIGlmIG92ZXJ3cml0ZV9hbW91bnQgPT0gLTEgYW5kIG5vdCBhc2tfb3ZlcndyaXRlOgogICAgICAgIHByaW50X2Vycm9yKCLimqDvuI8gVXBzIiwgIkhhcnVzIGFkYSBvdmVyd3JpdGVfYW1vdW50IGF0YXUgZmxhZyBhc2tfb3ZlcndyaXRlIGJybyDwn5qoIikKICAgICAgICByZXR1cm4gTm9uZQoKICAgIHRva2VuX2NvbmZpcm1hdGlvbiA9IGl0ZW1zW3Rva2VuX2NvbmZpcm1hdGlvbl9pZHhdWyJ0b2tlbl9jb25maXJtYXRpb24iXQogICAgcGF5bWVudF90YXJnZXRzID0gIjsiLmpvaW4oW2l0ZW1bIml0ZW1fY29kZSJdIGZvciBpdGVtIGluIGl0ZW1zXSkKCiAgICAjIERldGVybWluZSBhbW91bnQgdG8gdXNlCiAgICBpZiBvdmVyd3JpdGVfYW1vdW50ICE9IC0xOgogICAgICAgIGFtb3VudF9pbnQgPSBvdmVyd3JpdGVfYW1vdW50CiAgICBlbGlmIGFtb3VudF9pZHggPT0gLTE6CiAgICAgICAgYW1vdW50X2ludCA9IGl0ZW1zW2Ftb3VudF9pZHhdWyJpdGVtX3ByaWNlIl0KCiAgICAjIElmIE92ZXJ3cml0ZQogICAgaWYgYXNrX292ZXJ3cml0ZToKICAgICAgICBwcmludF9wYW5lbCgi8J+SsCBBbW91bnQiLCBmIlRvdGFsIHthbW91bnRfaW50fS4gTWFzdWtpbiBub21pbmFsIGJhcnUga2FsbyBtYXUgb3ZlcndyaXRlIGJybyDinIzvuI8iKQogICAgICAgIGFtb3VudF9zdHIgPSBpbnB1dCgiUHJlc3MgZW50ZXIgdG8gaWdub3JlICYgdXNlIGRlZmF1bHQgYW1vdW50OiAiKQogICAgICAgIGlmIGFtb3VudF9zdHIgIT0gIiI6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGFtb3VudF9pbnQgPSBpbnQoYW1vdW50X3N0cikKICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgICAgICBwcmludF93YXJuaW5nKCLimqDvuI8gVXBzIiwgIklucHV0IG92ZXJ3cml0ZSBuZ2FjbywgcGFrZSBoYXJnYSBhc2xpIGFqYSDwn5qoIikKCiAgICBpbnRlcmNlcHRfcGFnZShhcGlfa2V5LCB0b2tlbnMsIGl0ZW1zWzBdWyJpdGVtX2NvZGUiXSwgRmFsc2UpCgogICAgIyBHZXQgcGF5bWVudCBtZXRob2RzCiAgICBwYXltZW50X3BhdGggPSAicGF5bWVudHMvYXBpL3Y4L3BheW1lbnQtbWV0aG9kcy1vcHRpb24iCiAgICBwYXltZW50X3BheWxvYWQgPSB7CiAgICAgICAgInBheW1lbnRfdHlwZSI6ICJQVVJDSEFTRSIsCiAgICAgICAgImlzX2VudGVycHJpc2UiOiBGYWxzZSwKICAgICAgICAicGF5bWVudF90YXJnZXQiOiBpdGVtc1t0b2tlbl9jb25maXJtYXRpb25faWR4XVsiaXRlbV9jb2RlIl0sCiAgICAgICAgImxhbmciOiAiZW4iLAogICAgICAgICJpc19yZWZlcnJhbCI6IEZhbHNlLAogICAgICAgICJ0b2tlbl9jb25maXJtYXRpb24iOiB0b2tlbl9jb25maXJtYXRpb24sCiAgICB9CgogICAgd2l0aCBsaXZlX2xvYWRpbmcoIvCfkrMgR2V0dGluZyBwYXltZW50IG1ldGhvZHMuLi4iLCBnZXRfdGhlbWUoKSk6CiAgICAgICAgcGF5bWVudF9yZXMgPSBzZW5kX2FwaV9yZXF1ZXN0KGFwaV9rZXksIHBheW1lbnRfcGF0aCwgcGF5bWVudF9wYXlsb2FkLCB0b2tlbnNbImlkX3Rva2VuIl0sICJQT1NUIikKCiAgICBpZiBwYXltZW50X3Jlcy5nZXQoInN0YXR1cyIpICE9ICJTVUNDRVNTIjoKICAgICAgICBwcmludF9lcnJvcigi4pqg77iPIFVwcyIsICJHYWdhbCBhbWJpbCBwYXltZW50IG1ldGhvZHMgYnJvIPCfmqgiKQogICAgICAgIHByaW50X3BhbmVsKCLwn5ORIFJlc3BvbnNlIiwganNvbi5kdW1wcyhwYXltZW50X3JlcywgaW5kZW50PTIpKQogICAgICAgIHJldHVybiBwYXltZW50X3JlcwoKICAgIHRva2VuX3BheW1lbnQgPSBwYXltZW50X3Jlc1siZGF0YSJdWyJ0b2tlbl9wYXltZW50Il0KICAgIHRzX3RvX3NpZ24gPSBwYXltZW50X3Jlc1siZGF0YSJdWyJ0aW1lc3RhbXAiXQoKICAgICMgU2V0dGxlbWVudCByZXF1ZXN0CiAgICBwYXRoID0gInBheW1lbnRzL2FwaS92OC9zZXR0bGVtZW50LW11bHRpcGF5bWVudCIKICAgIHNldHRsZW1lbnRfcGF5bG9hZCA9IHsKICAgICAgICAidG90YWxfZGlzY291bnQiOiAwLAogICAgICAgICJpc19lbnRlcnByaXNlIjogRmFsc2UsCiAgICAgICAgInBheW1lbnRfdG9rZW4iOiAiIiwKICAgICAgICAidG9rZW5fcGF5bWVudCI6IHRva2VuX3BheW1lbnQsCiAgICAgICAgImFjdGl2YXRlZF9hdXRvYnV5X2NvZGUiOiAiIiwKICAgICAgICAiY2NfcGF5bWVudF90eXBlIjogIiIsCiAgICAgICAgImlzX215eGxfd2FsbGV0IjogRmFsc2UsCiAgICAgICAgInBpbiI6ICIiLAogICAgICAgICJld2FsbGV0X3Byb21vX2lkIjogIiIsCiAgICAgICAgIm1lbWJlcnMiOiBbXSwKICAgICAgICAidG90YWxfZmVlIjogMCwKICAgICAgICAiZmluZ2VycHJpbnQiOiAiIiwKICAgICAgICAiYXV0b2J1eV90aHJlc2hvbGRfc2V0dGluZyI6IHsibGFiZWwiOiAiIiwgInR5cGUiOiAiIiwgInZhbHVlIjogMH0sCiAgICAgICAgImlzX3VzZV9wb2ludCI6IEZhbHNlLAogICAgICAgICJsYW5nIjogImVuIiwKICAgICAgICAicGF5bWVudF9tZXRob2QiOiAiQkFMQU5DRSIsCiAgICAgICAgInRpbWVzdGFtcCI6IGludCh0aW1lLnRpbWUoKSksCiAgICAgICAgInBvaW50c19nYWluZWQiOiAwLAogICAgICAgICJjYW5fdHJpZ2dlcl9yYXRpbmciOiBGYWxzZSwKICAgICAgICAiYWtyYWJfbWVtYmVycyI6IFtdLAogICAgICAgICJha3JhYl9wYXJlbnRfYWxpYXMiOiAiIiwKICAgICAgICAicmVmZXJyYWxfdW5pcXVlX2NvZGUiOiAiIiwKICAgICAgICAiY291cG9uIjogIiIsCiAgICAgICAgInBheW1lbnRfZm9yIjogcGF5bWVudF9mb3IsCiAgICAgICAgIndpdGhfdXBzZWxsIjogRmFsc2UsCiAgICAgICAgInRvcHVwX251bWJlciI6IHRvcHVwX251bWJlciwKICAgICAgICAic3RhZ2VfdG9rZW4iOiBzdGFnZV90b2tlbiwKICAgICAgICAiYXV0aGVudGljYXRpb25faWQiOiAiIiwKICAgICAgICAiZW5jcnlwdGVkX3BheW1lbnRfdG9rZW4iOiBidWlsZF9lbmNyeXB0ZWRfZmllbGQodXJsc2FmZV9iNjQ9VHJ1ZSksCiAgICAgICAgInRva2VuIjogIiIsCiAgICAgICAgInRva2VuX2NvbmZpcm1hdGlvbiI6ICIiLAogICAgICAgICJhY2Nlc3NfdG9rZW4iOiB0b2tlbnNbImFjY2Vzc190b2tlbiJdLAogICAgICAgICJ3YWxsZXRfbnVtYmVyIjogIiIsCiAgICAgICAgImVuY3J5cHRlZF9hdXRoZW50aWNhdGlvbl9pZCI6IGJ1aWxkX2VuY3J5cHRlZF9maWVsZCh1cmxzYWZlX2I2ND1UcnVlKSwKICAgICAgICAiYWRkaXRpb25hbF9kYXRhIjogewogICAgICAgICAgICAib3JpZ2luYWxfcHJpY2UiOiBpdGVtc1stMV1bIml0ZW1fcHJpY2UiXSwKICAgICAgICAgICAgImlzX3NwZW5kX2xpbWl0X3RlbXBvcmFyeSI6IEZhbHNlLAogICAgICAgICAgICAibWlncmF0aW9uX3R5cGUiOiAiIiwKICAgICAgICAgICAgImFrcmFiX20ybV9ncm91cF9pZCI6ICJmYWxzZSIsCiAgICAgICAgICAgICJzcGVuZF9saW1pdF9hbW91bnQiOiAwLAogICAgICAgICAgICAiaXNfc3BlbmRfbGltaXQiOiBGYWxzZSwKICAgICAgICAgICAgIm1pc3Npb25faWQiOiAiIiwKICAgICAgICAgICAgInRheCI6IDAsCiAgICAgICAgICAgICJxdW90YV9ib251cyI6IDAsCiAgICAgICAgICAgICJjYXNodGFnIjogIiIsCiAgICAgICAgICAgICJpc19mYW1pbHlfcGxhbiI6IEZhbHNlLAogICAgICAgICAgICAiY29tYm9fZGV0YWlscyI6IFtdLAogICAgICAgICAgICAiaXNfc3dpdGNoX3BsYW4iOiBGYWxzZSwKICAgICAgICAgICAgImRpc2NvdW50X3JlY3VycmluZyI6IDAsCiAgICAgICAgICAgICJpc19ha3JhYl9tMm0iOiBGYWxzZSwKICAgICAgICAgICAgImJhbGFuY2VfdHlwZSI6ICJQUkVQQUlEX0JBTEFOQ0UiLAogICAgICAgICAgICAiaGFzX2JvbnVzIjogRmFsc2UsCiAgICAgICAgICAgICJkaXNjb3VudF9wcm9tbyI6IDAsCiAgICAgICAgfSwKICAgICAgICAidG90YWxfYW1vdW50IjogYW1vdW50X2ludCwKICAgICAgICAiaXNfdXNpbmdfYXV0b2J1eSI6IEZhbHNlLAogICAgICAgICJpdGVtcyI6IGl0ZW1zLAogICAgfQoKICAgIGVuY3J5cHRlZF9wYXlsb2FkID0gZW5jcnlwdHNpZ25feGRhdGEoCiAgICAgICAgYXBpX2tleT1hcGlfa2V5LAogICAgICAgIG1ldGhvZD0iUE9TVCIsCiAgICAgICAgcGF0aD1wYXRoLAogICAgICAgIGlkX3Rva2VuPXRva2Vuc1siaWRfdG9rZW4iXSwKICAgICAgICBwYXlsb2FkPXNldHRsZW1lbnRfcGF5bG9hZCwKICAgICkKCiAgICB4dGltZSA9IGludChlbmNyeXB0ZWRfcGF5bG9hZFsiZW5jcnlwdGVkX2JvZHkiXVsieHRpbWUiXSkKICAgIHNpZ190aW1lX3NlYyA9IHh0aW1lIC8vIDEwMDAKICAgIHhfcmVxdWVzdGVkX2F0ID0gZGF0ZXRpbWUuZnJvbXRpbWVzdGFtcChzaWdfdGltZV9zZWMsIHR6PXRpbWV6b25lLnV0YykuYXN0aW1lem9uZSgpCiAgICBzZXR0bGVtZW50X3BheWxvYWRbInRpbWVzdGFtcCJdID0gdHNfdG9fc2lnbgoKICAgIGJvZHkgPSBlbmNyeXB0ZWRfcGF5bG9hZFsiZW5jcnlwdGVkX2JvZHkiXQogICAgeF9zaWcgPSBnZXRfeF9zaWduYXR1cmVfcGF5bWVudCgKICAgICAgICBhcGlfa2V5LAogICAgICAgIHRva2Vuc1siYWNjZXNzX3Rva2VuIl0sCiAgICAgICAgdHNfdG9fc2lnbiwKICAgICAgICBwYXltZW50X3RhcmdldHMsCiAgICAgICAgdG9rZW5fcGF5bWVudCwKICAgICAgICAiQkFMQU5DRSIsCiAgICAgICAgcGF5bWVudF9mb3IsCiAgICAgICAgcGF0aCwKICAgICkKCiAgICBoZWFkZXJzID0gewogICAgICAgICJob3N0IjogQkFTRV9BUElfVVJMLnJlcGxhY2UoImh0dHBzOi8vIiwgIiIpLAogICAgICAgICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCIsCiAgICAgICAgInVzZXItYWdlbnQiOiBVQSwKICAgICAgICAieC1hcGkta2V5IjogQVBJX0tFWSwKICAgICAgICAiYXV0aG9yaXphdGlvbiI6IGYiQmVhcmVyIHt0b2tlbnNbJ2lkX3Rva2VuJ119IiwKICAgICAgICAieC1odiI6ICJ2MyIsCiAgICAgICAgIngtc2lnbmF0dXJlLXRpbWUiOiBzdHIoc2lnX3RpbWVfc2VjKSwKICAgICAgICAieC1zaWduYXR1cmUiOiB4X3NpZywKICAgICAgICAieC1yZXF1ZXN0LWlkIjogc3RyKHV1aWQudXVpZDQoKSksCiAgICAgICAgIngtcmVxdWVzdC1hdCI6IGphdmFfbGlrZV90aW1lc3RhbXAoeF9yZXF1ZXN0ZWRfYXQpLAogICAgICAgICJ4LXZlcnNpb24tYXBwIjogIjguOS4xIiwKICAgIH0KCiAgICB1cmwgPSBmIntCQVNFX0FQSV9VUkx9L3twYXRofSIKICAgIHdpdGggbGl2ZV9sb2FkaW5nKCLwn5OkIExhZ2kga2lyaW0gc2V0dGxlbWVudCByZXF1ZXN0IGJyby4uLiIsIGdldF90aGVtZSgpKToKICAgICAgICByZXNwID0gcmVxdWVzdHMucG9zdCh1cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGJvZHkpLCB0aW1lb3V0PTMwKQoKICAgIHRyeToKICAgICAgICBkZWNyeXB0ZWRfYm9keSA9IGRlY3J5cHRfeGRhdGEoYXBpX2tleSwganNvbi5sb2FkcyhyZXNwLnRleHQpKQogICAgICAgIGlmIGRlY3J5cHRlZF9ib2R5LmdldCgic3RhdHVzIikgIT0gIlNVQ0NFU1MiOgogICAgICAgICAgICBwcmludF9lcnJvcigi4pqg77iPIFVwcyIsICJTZXR0bGVtZW50IGdhZ2FsIGJybyDwn5qoIikKICAgICAgICAgICAgcHJpbnRfcGFuZWwoIvCfk5EgUmVzcG9uc2UiLCBqc29uLmR1bXBzKGRlY3J5cHRlZF9ib2R5LCBpbmRlbnQ9MikpCiAgICAgICAgICAgIHJldHVybiBkZWNyeXB0ZWRfYm9keQoKICAgICAgICBwcmludF9zdWNjZXNzKCLinIUgTWFudGFwIiwgIlBlbWJlbGlhbiBzdWtzZXMgYnJvIPCfmoAiKQogICAgICAgIHByaW50X3BhbmVsKCLwn6e+IFB1cmNoYXNlIFJlc3VsdCIsIGpzb24uZHVtcHMoZGVjcnlwdGVkX2JvZHksIGluZGVudD0yKSkKICAgICAgICByZXR1cm4gZGVjcnlwdGVkX2JvZHkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludF9lcnJvcigi4pqg77iPIFVwcyIsIGYiRXJyb3IgZGVjcnlwdDoge2V9IPCfpK8iKQogICAgICAgIHByaW50X3BhbmVsKCLwn5ORIFJhdyBSZXNwb25zZSIsIHJlc3AudGV4dCkKICAgICAgICByZXR1cm4gcmVzcC50ZXh0Cg==').decode())
