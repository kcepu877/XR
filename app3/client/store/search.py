#!/usr/bin/env python3
import base64
exec(base64.b64decode('aW1wb3J0IGpzb24KZnJvbSBhcHAzLmNsaWVudC5lbmdzZWwgaW1wb3J0IHNlbmRfYXBpX3JlcXVlc3QKZnJvbSBhcHAzLm1lbnVzLnV0aWwgaW1wb3J0IGxpdmVfbG9hZGluZywgcHJpbnRfcGFuZWwKZnJvbSBhcHAzLmNvbmZpZy50aGVtZV9jb25maWcgaW1wb3J0IGdldF90aGVtZQoKCmRlZiBnZXRfZmFtaWx5X2xpc3QoYXBpX2tleTogc3RyLCB0b2tlbnM6IGRpY3QsCiAgICAgICAgICAgICAgICAgICAgc3Vic190eXBlOiBzdHIgPSAiUFJFUEFJRCIsCiAgICAgICAgICAgICAgICAgICAgaXNfZW50ZXJwcmlzZTogYm9vbCA9IEZhbHNlKSAtPiBkaWN0IHwgTm9uZToKICAgIHBhdGggPSAiYXBpL3Y4L3hsLXN0b3Jlcy9vcHRpb25zL3NlYXJjaC9mYW1pbHktbGlzdCIKICAgIHBheWxvYWQgPSB7ImlzX2VudGVycHJpc2UiOiBpc19lbnRlcnByaXNlLCAic3Vic190eXBlIjogc3Vic190eXBlLCAibGFuZyI6ICJlbiJ9CgogICAgd2l0aCBsaXZlX2xvYWRpbmcoIvCfkajigI3wn5Gp4oCN8J+RpyBMYWdpIG5ndW1wdWxpbiBmYW1pbHkgbGlzdCBicm8uLi4iLCBnZXRfdGhlbWUoKSk6CiAgICAgICAgcmVzID0gc2VuZF9hcGlfcmVxdWVzdChhcGlfa2V5LCBwYXRoLCBwYXlsb2FkLCB0b2tlbnNbImlkX3Rva2VuIl0sICJQT1NUIikKCiAgICBpZiBub3QgcmVzIG9yIHJlcy5nZXQoInN0YXR1cyIpICE9ICJTVUNDRVNTIjoKICAgICAgICBwcmludF9wYW5lbCgi4pqg77iPIFVwcyIsICJHYWdhbCBhbWJpbCBmYW1pbHkgbGlzdCBicm8g8J+aqCIpCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBwcmludF9wYW5lbCgi4pyFIE1hbnRhcCIsICJGYW1pbHkgbGlzdCBiZXJoYXNpbCBkaWFtYmlsIPCfmoAiKQogICAgcmV0dXJuIHJlcwoKCmRlZiBnZXRfc3RvcmVfcGFja2FnZXMoYXBpX2tleTogc3RyLCB0b2tlbnM6IGRpY3QsCiAgICAgICAgICAgICAgICAgICAgICAgc3Vic190eXBlOiBzdHIgPSAiUFJFUEFJRCIsCiAgICAgICAgICAgICAgICAgICAgICAgaXNfZW50ZXJwcmlzZTogYm9vbCA9IEZhbHNlKSAtPiBkaWN0IHwgTm9uZToKICAgIHBhdGggPSAiYXBpL3Y5L3hsLXN0b3Jlcy9vcHRpb25zL3NlYXJjaCIKICAgIHBheWxvYWQgPSB7CiAgICAgICAgImlzX2VudGVycHJpc2UiOiBpc19lbnRlcnByaXNlLAogICAgICAgICJmaWx0ZXJzIjogWwogICAgICAgICAgICB7InVuaXQiOiAiVEhPVVNBTkQiLCAiaWQiOiAiRklMX1NFTF9QIiwgInR5cGUiOiAiUFJJQ0UiLCAiaXRlbXMiOiBbXX0sCiAgICAgICAgICAgIHsidW5pdCI6ICJHQiIsICJpZCI6ICJGSUxfU0VMX01RIiwgInR5cGUiOiAiREFUQV9UWVBFIiwgIml0ZW1zIjogW119LAogICAgICAgICAgICB7InVuaXQiOiAiUEFDS0FHRV9OQU1FIiwgImlkIjogIkZJTF9QS0dfTiIsICJ0eXBlIjogIlBBQ0tBR0VfTkFNRSIsCiAgICAgICAgICAgICAiaXRlbXMiOiBbeyJpZCI6ICIiLCAibGFiZWwiOiAiIn1dfSwKICAgICAgICAgICAgeyJ1bml0IjogIkRBWSIsICJpZCI6ICJGSUxfU0VMX1YiLCAidHlwZSI6ICJWQUxJRElUWSIsICJpdGVtcyI6IFtdfSwKICAgICAgICBdLAogICAgICAgICJzdWJzdHlwZSI6IHN1YnNfdHlwZSwKICAgICAgICAidGV4dF9zZWFyY2giOiAiIiwKICAgICAgICAibGFuZyI6ICJlbiIsCiAgICB9CgogICAgd2l0aCBsaXZlX2xvYWRpbmcoIvCfk6YgTGFnaSBuZ3VtcHVsaW4gc3RvcmUgcGFja2FnZXMgYnJvLi4uIiwgZ2V0X3RoZW1lKCkpOgogICAgICAgIHJlcyA9IHNlbmRfYXBpX3JlcXVlc3QoYXBpX2tleSwgcGF0aCwgcGF5bG9hZCwgdG9rZW5zWyJpZF90b2tlbiJdLCAiUE9TVCIpCgogICAgaWYgbm90IHJlcyBvciByZXMuZ2V0KCJzdGF0dXMiKSAhPSAiU1VDQ0VTUyI6CiAgICAgICAgcHJpbnRfcGFuZWwoIuKaoO+4jyBVcHMiLCAiR2FnYWwgYW1iaWwgc3RvcmUgcGFja2FnZXMgYnJvIPCfmqgiKQogICAgICAgIHJldHVybiBOb25lCgogICAgcHJpbnRfcGFuZWwoIuKchSBNYW50YXAiLCAiU3RvcmUgcGFja2FnZXMgYmVyaGFzaWwgZGlhbWJpbCDwn5qAIikKICAgIHJldHVybiByZXMK').decode())
