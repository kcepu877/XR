#!/usr/bin/env python3
import base64
exec(base64.b64decode('aW1wb3J0IHV1aWQKaW1wb3J0IHJlcXVlc3RzCmltcG9ydCBqc29uCgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZSwgdGltZXpvbmUKCmZyb20gYXBwMy5jbGllbnQuZW5nc2VsIGltcG9ydCBCQVNFX0FQSV9VUkwsIFVBCmZyb20gYXBwMy5jbGllbnQuZW5jcnlwdCBpbXBvcnQgKAogICAgQVBJX0tFWSwKICAgIGphdmFfbGlrZV90aW1lc3RhbXAsCiAgICBnZXRfeF9zaWduYXR1cmVfYmFsYW5jZV9hbGxvdG1lbnQsCiAgICBlbmNyeXB0c2lnbl94ZGF0YSwKICAgIGRlY3J5cHRfeGRhdGEsCikKZnJvbSBhcHAzLmNvbmZpZy50aGVtZV9jb25maWcgaW1wb3J0IGdldF90aGVtZQpmcm9tIGFwcDMubWVudXMudXRpbCBpbXBvcnQgcHJpbnRfcGFuZWwsIGxpdmVfbG9hZGluZwpmcm9tIHJpY2guY29uc29sZSBpbXBvcnQgQ29uc29sZQoKY29uc29sZSA9IENvbnNvbGUoKQoKZGVmIGJhbGFuY2VfYWxsb3RtZW50KAogICAgYXBpX2tleTogc3RyLAogICAgdG9rZW5zOiBkaWN0LAogICAgc3RhZ2VfdG9rZW46IHN0ciwKICAgIHJlY2VpdmVyX21zaXNkbjogc3RyLAogICAgYW1vdW50OiBpbnQsCik6CiAgICB0aGVtZSA9IGdldF90aGVtZSgpCiAgICBwYXRoID0gInNoYXJpbmdzL2FwaS92OC9iYWxhbmNlL2FsbG90bWVudCIKICAgICAgICAKICAgIGFsbG90bWVudF9wYXlsb2FkID0gewogICAgICAgICJhY2Nlc3NfdG9rZW4iOiB0b2tlbnNbImFjY2Vzc190b2tlbiJdLAogICAgICAgICJyZWNlaXZlciI6IHJlY2VpdmVyX21zaXNkbiwKICAgICAgICAiYW1vdW50IjogYW1vdW50LAogICAgICAgICJzdGFnZV90b2tlbiI6IHN0YWdlX3Rva2VuLAogICAgICAgICJsYW5nIjogImVuIiwKICAgICAgICAiaXNfZW50ZXJwcmlzZSI6IEZhbHNlLAogICAgfQogICAgCiAgICBlbmNyeXB0ZWRfcGF5bG9hZCA9IGVuY3J5cHRzaWduX3hkYXRhKAogICAgICAgIGFwaV9rZXk9YXBpX2tleSwKICAgICAgICBtZXRob2Q9IlBPU1QiLAogICAgICAgIHBhdGg9cGF0aCwKICAgICAgICBpZF90b2tlbj10b2tlbnNbImlkX3Rva2VuIl0sCiAgICAgICAgcGF5bG9hZD1hbGxvdG1lbnRfcGF5bG9hZAogICAgKQogICAgCiAgICB4dGltZSA9IGludChlbmNyeXB0ZWRfcGF5bG9hZFsiZW5jcnlwdGVkX2JvZHkiXVsieHRpbWUiXSkKICAgIHNpZ190aW1lX3NlYyA9ICh4dGltZSAvLyAxMDAwKQogICAgeF9yZXF1ZXN0ZWRfYXQgPSBkYXRldGltZS5mcm9tdGltZXN0YW1wKHNpZ190aW1lX3NlYywgdHo9dGltZXpvbmUudXRjKS5hc3RpbWV6b25lKCkKICAgIAogICAgYm9keSA9IGVuY3J5cHRlZF9wYXlsb2FkWyJlbmNyeXB0ZWRfYm9keSJdCiAgICAKICAgIHhfc2lnID0gZ2V0X3hfc2lnbmF0dXJlX2JhbGFuY2VfYWxsb3RtZW50KAogICAgICAgIGFwaV9rZXk9YXBpX2tleSwKICAgICAgICBwYXRoPXBhdGgsCiAgICAgICAgYWNjZXNzX3Rva2VuPXRva2Vuc1siYWNjZXNzX3Rva2VuIl0sCiAgICAgICAgbXNpc2RuPXJlY2VpdmVyX21zaXNkbiwKICAgICAgICBhbW91bnQ9YW1vdW50LAogICAgKQogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICJob3N0IjogQkFTRV9BUElfVVJMLnJlcGxhY2UoImh0dHBzOi8vIiwgIiIpLAogICAgICAgICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCIsCiAgICAgICAgInVzZXItYWdlbnQiOiBVQSwKICAgICAgICAieC1hcGkta2V5IjogQVBJX0tFWSwKICAgICAgICAiYXV0aG9yaXphdGlvbiI6IGYiQmVhcmVyIHt0b2tlbnNbJ2lkX3Rva2VuJ119IiwKICAgICAgICAieC1odiI6ICJ2MyIsCiAgICAgICAgIngtc2lnbmF0dXJlLXRpbWUiOiBzdHIoc2lnX3RpbWVfc2VjKSwKICAgICAgICAieC1zaWduYXR1cmUiOiB4X3NpZywKICAgICAgICAieC1yZXF1ZXN0LWlkIjogc3RyKHV1aWQudXVpZDQoKSksCiAgICAgICAgIngtcmVxdWVzdC1hdCI6IGphdmFfbGlrZV90aW1lc3RhbXAoeF9yZXF1ZXN0ZWRfYXQpLAogICAgICAgICJ4LXZlcnNpb24tYXBwIjogIjguOS4xIiwKICAgIH0KICAgIAogICAgdXJsID0gZiJ7QkFTRV9BUElfVVJMfS97cGF0aH0iCiAgICAjd2l0aCBsaXZlX2xvYWRpbmcoIvCflIQgTGFnaSBraXJpbSBiYWxhbmNlIGFsbG90bWVudC4uLiIsIHRoZW1lKToKICAgIHJlc3AgPSByZXF1ZXN0cy5wb3N0KHVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoYm9keSksIHRpbWVvdXQ9MzApCiAgICAKICAgIHRyeToKICAgICAgICBkZWNyeXB0ZWRfYm9keSA9IGRlY3J5cHRfeGRhdGEoYXBpX2tleSwganNvbi5sb2FkcyhyZXNwLnRleHQpKQogICAgICAgIGlmIGRlY3J5cHRlZF9ib2R5WyJzdGF0dXMiXSAhPSAiU1VDQ0VTUyI6CiAgICAgICAgICAgIHByaW50X3BhbmVsKCLimqDvuI8gVXBzIiwgZiJHYWdhbCBhbGxvdG1lbnQgYnJvIPCfmqhcbntkZWNyeXB0ZWRfYm9keX0iLCBib3JkZXJfc3R5bGU9dGhlbWVbImJvcmRlcl93YXJuaW5nIl0pCiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgCiAgICAgICAgcHJpbnRfcGFuZWwoIuKchSBNYW50YXAiLCAiQmFsYW5jZSBhbGxvdG1lbnQgc3Vrc2VzIGJybyDwn5qAIiwgYm9yZGVyX3N0eWxlPXRoZW1lWyJib3JkZXJfc3VjY2VzcyJdKQogICAgICAgIHJldHVybiBkZWNyeXB0ZWRfYm9keQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50X3BhbmVsKCLimqDvuI8gVXBzIiwgZiJEZWNyeXB0IGVycm9yIGJybyDwn5qoXG57ZX0iLCBib3JkZXJfc3R5bGU9dGhlbWVbImJvcmRlcl9lcnIiXSkKICAgICAgICByZXR1cm4gcmVzcC50ZXh0Cg==').decode())
