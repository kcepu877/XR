name: ðŸŽ¯ ONE-CLICK ROLLBACK

on:
  workflow_dispatch:

jobs:
  rollback:
    runs-on: ubuntu-latest
    
    steps:
      # STEP 1: Checkout dengan token
      - name: ðŸ“¥ Checkout Repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
          token: ${{ secrets.GITHARD }}  # <-- PASTIKAN INI ADA!
      
      # STEP 2: Setup git
      - name: ðŸ› ï¸ Setup Git
        run: |
          git config --global user.name "Rollback Bot"
          git config --global user.email "rollback@github.com"
      
      # STEP 3: Execute rollback
      - name: ðŸ”™ FORCE ROLLBACK
        run: |
          echo "ðŸš€ STARTING ROLLBACK..."
          echo "Target: 7f4fb63d06f4a60fe822d57733d86317df759f76"
          
          # Switch to main
          git checkout main
          
          # Reset to target
          git reset --hard 7f4fb63d06f4a60fe822d57733d86317df759f76
          
          # Force push
          git push origin main --force
          
          echo "âœ… ROLLBACK COMPLETE!"
