name: ⚡ Quick Obfuscator

on:
  workflow_dispatch:

jobs:
  obfuscate:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Obfuscate Files
      run: |
        # Process Python files
        for file in $(find . -name "*.py" ! -path "./.git/*"); do
          echo "Processing Python: $file"
          b64=$(base64 -w 0 "$file")
          echo -e "#!/usr/bin/env python3\nimport base64\nexec(base64.b64decode('$b64').decode())" > "$file.new"
          mv "$file.new" "$file"
          chmod +x "$file"
        done
        
        # Process Shell files
        for file in $(find . -name "*.sh" ! -path "./.git/*"); do
          echo "Processing Shell: $file"
          b64=$(base64 -w 0 "$file")
          echo -e "#!/bin/bash\neval \"\$(echo '$b64' | base64 -d)\"" > "$file.new"
          mv "$file.new" "$file"
          chmod +x "$file"
        done
        
        # Process JavaScript files
        for file in $(find . -name "*.js" ! -path "./.git/*"); do
          echo "Processing JS: $file"
          b64=$(base64 -w 0 "$file")
          echo -e "#!/usr/bin/env node\nconst b='$b64';\neval(Buffer.from(b,'base64').toString())" > "$file.new"
          mv "$file.new" "$file"
          chmod +x "$file"
        done
    
    - name: Push Changes
      run: |
        git config user.name "Obfuscator-Bot"
        git config user.email "bot@github"
        git add .
        git commit -m "⚡ Obfuscate files" || echo "No changes"
        git push
