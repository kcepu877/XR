#!/usr/bin/env python3
import base64
exec(base64.b64decode('aW1wb3J0IHV1aWQKaW1wb3J0IHJlcXVlc3RzCmltcG9ydCBqc29uCgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZSwgdGltZXpvbmUKCmZyb20gYXBwLmNsaWVudC5lbmdzZWwgaW1wb3J0IEJBU0VfQVBJX1VSTCwgVUEKZnJvbSBhcHAuY2xpZW50LmVuY3J5cHQgaW1wb3J0ICgKICAgIEFQSV9LRVksCiAgICBqYXZhX2xpa2VfdGltZXN0YW1wLAogICAgZ2V0X3hfc2lnbmF0dXJlX2JhbGFuY2VfYWxsb3RtZW50LAogICAgZW5jcnlwdHNpZ25feGRhdGEsCiAgICBkZWNyeXB0X3hkYXRhLAopCgpkZWYgYmFsYW5jZV9hbGxvdG1lbnQoCiAgICBhcGlfa2V5OiBzdHIsCiAgICB0b2tlbnM6IGRpY3QsCiAgICBzdGFnZV90b2tlbjogc3RyLAogICAgcmVjZWl2ZXJfbXNpc2RuOiBzdHIsCiAgICBhbW91bnQ6IGludCwKKToKICAgIHBhdGggPSAic2hhcmluZ3MvYXBpL3Y4L2JhbGFuY2UvYWxsb3RtZW50IgogICAgICAgIAogICAgYWxsb3RtZW50X3BheWxvYWQgPSB7CiAgICAgICAgImFjY2Vzc190b2tlbiI6IHRva2Vuc1siYWNjZXNzX3Rva2VuIl0sCiAgICAgICAgInJlY2VpdmVyIjogcmVjZWl2ZXJfbXNpc2RuLAogICAgICAgICJhbW91bnQiOiBhbW91bnQsCiAgICAgICAgInN0YWdlX3Rva2VuIjogc3RhZ2VfdG9rZW4sCiAgICAgICAgImxhbmciOiAiZW4iLAogICAgICAgICJpc19lbnRlcnByaXNlIjogRmFsc2UsCiAgICB9CiAgICAKICAgIGVuY3J5cHRlZF9wYXlsb2FkID0gZW5jcnlwdHNpZ25feGRhdGEoCiAgICAgICAgYXBpX2tleT1hcGlfa2V5LAogICAgICAgIG1ldGhvZD0iUE9TVCIsCiAgICAgICAgcGF0aD1wYXRoLAogICAgICAgIGlkX3Rva2VuPXRva2Vuc1siaWRfdG9rZW4iXSwKICAgICAgICBwYXlsb2FkPWFsbG90bWVudF9wYXlsb2FkCiAgICApCiAgICAKICAgIHh0aW1lID0gaW50KGVuY3J5cHRlZF9wYXlsb2FkWyJlbmNyeXB0ZWRfYm9keSJdWyJ4dGltZSJdKQogICAgc2lnX3RpbWVfc2VjID0gKHh0aW1lIC8vIDEwMDApCiAgICB4X3JlcXVlc3RlZF9hdCA9IGRhdGV0aW1lLmZyb210aW1lc3RhbXAoc2lnX3RpbWVfc2VjLCB0ej10aW1lem9uZS51dGMpLmFzdGltZXpvbmUoKQogICAgCiAgICBib2R5ID0gZW5jcnlwdGVkX3BheWxvYWRbImVuY3J5cHRlZF9ib2R5Il0KICAgIAogICAgeF9zaWcgPSBnZXRfeF9zaWduYXR1cmVfYmFsYW5jZV9hbGxvdG1lbnQoCiAgICAgICAgYXBpX2tleT1hcGlfa2V5LAogICAgICAgIHBhdGg9cGF0aCwKICAgICAgICBhY2Nlc3NfdG9rZW49dG9rZW5zWyJhY2Nlc3NfdG9rZW4iXSwKICAgICAgICBtc2lzZG49cmVjZWl2ZXJfbXNpc2RuLAogICAgICAgIGFtb3VudD1hbW91bnQsCiAgICApCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgImhvc3QiOiBCQVNFX0FQSV9VUkwucmVwbGFjZSgiaHR0cHM6Ly8iLCAiIiksCiAgICAgICAgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04IiwKICAgICAgICAidXNlci1hZ2VudCI6IFVBLAogICAgICAgICJ4LWFwaS1rZXkiOiBBUElfS0VZLAogICAgICAgICJhdXRob3JpemF0aW9uIjogZiJCZWFyZXIge3Rva2Vuc1snaWRfdG9rZW4nXX0iLAogICAgICAgICJ4LWh2IjogInYzIiwKICAgICAgICAieC1zaWduYXR1cmUtdGltZSI6IHN0cihzaWdfdGltZV9zZWMpLAogICAgICAgICJ4LXNpZ25hdHVyZSI6IHhfc2lnLAogICAgICAgICJ4LXJlcXVlc3QtaWQiOiBzdHIodXVpZC51dWlkNCgpKSwKICAgICAgICAieC1yZXF1ZXN0LWF0IjogamF2YV9saWtlX3RpbWVzdGFtcCh4X3JlcXVlc3RlZF9hdCksCiAgICAgICAgIngtdmVyc2lvbi1hcHAiOiAiOC45LjAiLAogICAgfQogICAgCiAgICB1cmwgPSBmIntCQVNFX0FQSV9VUkx9L3twYXRofSIKICAgIHByaW50KCJTZW5kaW5nIGJhbGFuY2UgYWxsb3RtZW50IHJlcXVlc3QuLi4iKQogICAgCiAgICByZXNwID0gcmVxdWVzdHMucG9zdCh1cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGJvZHkpLCB0aW1lb3V0PTMwKQogICAgCiAgICB0cnk6CiAgICAgICAgZGVjcnlwdGVkX2JvZHkgPSBkZWNyeXB0X3hkYXRhKGFwaV9rZXksIGpzb24ubG9hZHMocmVzcC50ZXh0KSkKICAgICAgICBpZiBkZWNyeXB0ZWRfYm9keVsic3RhdHVzIl0gIT0gIlNVQ0NFU1MiOgogICAgICAgICAgICBwcmludCgiRmFpbGVkIikKICAgICAgICAgICAgcHJpbnQoZiJFcnJvcjoge2RlY3J5cHRlZF9ib2R5fSIpCiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgCiAgICAgICAgcmV0dXJuIGRlY3J5cHRlZF9ib2R5CiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoIltkZWNyeXB0IGVycl0iLCBlKQogICAgICAgIHJldHVybiByZXNwLnRleHQKICAgICAgICA=').decode())
