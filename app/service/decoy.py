#!/usr/bin/env python3
import base64
exec(base64.b64decode('aW1wb3J0IHRpbWUKaW1wb3J0IGpzb24KCmZyb20gYXBwMi5jbGllbnQuZW5nc2VsIGltcG9ydCBnZXRfcGFja2FnZV9kZXRhaWxzCmZyb20gYXBwLnNlcnZpY2UuYXV0aCBpbXBvcnQgQXV0aEluc3RhbmNlCgoKY2xhc3MgRGVjb3lQYWNrYWdlOgogICAgX2luc3RhbmNlXyA9IE5vbmUKICAgIF9pbml0aWFsaXplZF8gPSBGYWxzZQoKICAgIGRlY295X2Jhc2VfcGF0aCA9ICJkZWNveV9kYXRhL2RlY295LSIKICAgIHN1YnNjcmliZXJfaWQgPSBOb25lCiAgICBzdWJzY3JpcHRpb25fdHlwZSA9IE5vbmUKCiAgICBuZWVkX3ByaW9fZGVjb3lzID0gWyJQUklPUklUQVMiLCAiUFJJT0hZQlJJRCIsICJHTyJdCiAgICBwcmVmaXggPSAiZGVmYXVsdC0iCgogICAgc3VwcG9ydGVkX3BheW1lbnRfdHlwZXMgPSBbImJhbGFuY2UiLCAicXJpcyIsICJxcmlzMCJdCgogICAgZGVjb3lzID0ge30KICAgIGluaXRpYWxfZGVjb3lzID0gewogICAgICAgICJkZWZhdWx0LWJhbGFuY2UiOiB7Im9wdGlvbl9jb2RlIjogIiIsICJwcmljZSI6IDAsICJsYXN0X2ZldGNoZWRfYXQiOiAwfSwKICAgICAgICAiZGVmYXVsdC1xcmlzIjogeyJvcHRpb25fY29kZSI6ICIiLCAicHJpY2UiOiAwLCAibGFzdF9mZXRjaGVkX2F0IjogMH0sCiAgICAgICAgImRlZmF1bHQtcXJpczAiOiB7Im9wdGlvbl9jb2RlIjogIiIsICJwcmljZSI6IDAsICJsYXN0X2ZldGNoZWRfYXQiOiAwfSwKICAgICAgICAicHJpby1iYWxhbmNlIjogeyJvcHRpb25fY29kZSI6ICIiLCAicHJpY2UiOiAwLCAibGFzdF9mZXRjaGVkX2F0IjogMH0sCiAgICAgICAgInByaW8tcXJpcyI6IHsib3B0aW9uX2NvZGUiOiAiIiwgInByaWNlIjogMCwgImxhc3RfZmV0Y2hlZF9hdCI6IDB9LAogICAgICAgICJwcmlvLXFyaXMwIjogeyJvcHRpb25fY29kZSI6ICIiLCAicHJpY2UiOiAwLCAibGFzdF9mZXRjaGVkX2F0IjogMH0sCiAgICB9CgogICAgZGVmIF9fbmV3X18oY2xzLCAqYXJncywgKiprd2FyZ3MpOgogICAgICAgIGlmIG5vdCBjbHMuX2luc3RhbmNlXzoKICAgICAgICAgICAgY2xzLl9pbnN0YW5jZV8gPSBzdXBlcigpLl9fbmV3X18oY2xzKQogICAgICAgIHJldHVybiBjbHMuX2luc3RhbmNlXwoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBpZiBub3Qgc2VsZi5faW5pdGlhbGl6ZWRfOgogICAgICAgICAgICBzZWxmLmRlY295cyA9IHNlbGYuaW5pdGlhbF9kZWNveXMuY29weSgpCiAgICAgICAgICAgIHNlbGYuX2luaXRpYWxpemVkXyA9IFRydWUKCiAgICBkZWYgY2hlY2tfc3Vic2NyaWJlcl9jaGFuZ2Uoc2VsZik6CiAgICAgICAgYWN0aXZlX3VzZXIgPSBBdXRoSW5zdGFuY2UuZ2V0X2FjdGl2ZV91c2VyKCkKICAgICAgICBpZiBhY3RpdmVfdXNlciBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgY3VycmVudF9zdWJzY3JpYmVyX2lkID0gYWN0aXZlX3VzZXIuZ2V0KCJzdWJzY3JpYmVyX2lkIiwgIiIpCiAgICAgICAgY3VycmVudF9zdWJzY3JpcHRpb25fdHlwZSA9IGFjdGl2ZV91c2VyLmdldCgic3Vic2NyaXB0aW9uX3R5cGUiLCAiIikKICAgICAgICBpZiBzZWxmLnN1YnNjcmliZXJfaWQgIT0gY3VycmVudF9zdWJzY3JpYmVyX2lkOgogICAgICAgICAgICBzZWxmLnJlc2V0X2RlY295cygpCiAgICAgICAgICAgIHNlbGYuc3Vic2NyaWJlcl9pZCA9IGN1cnJlbnRfc3Vic2NyaWJlcl9pZAogICAgICAgICAgICBzZWxmLnN1YnNjcmlwdGlvbl90eXBlID0gY3VycmVudF9zdWJzY3JpcHRpb25fdHlwZQoKICAgICAgICAgICAgaWYgY3VycmVudF9zdWJzY3JpcHRpb25fdHlwZSBpbiBzZWxmLm5lZWRfcHJpb19kZWNveXM6CiAgICAgICAgICAgICAgICBzZWxmLnByZWZpeCA9ICJwcmlvLSIKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYucHJlZml4ID0gImRlZmF1bHQtIgoKICAgIGRlZiBmZXRjaF9kZWNveV9kYXRhKHNlbGYsIGRlY295X25hbWU6IHN0cik6CiAgICAgICAgYWN0aXZlX3VzZXIgPSBBdXRoSW5zdGFuY2UuZ2V0X2FjdGl2ZV91c2VyKCkKICAgICAgICBpZiBhY3RpdmVfdXNlciBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgICAgICBhcGlfa2V5ID0gQXV0aEluc3RhbmNlLmFwaV9rZXkKICAgICAgICB0b2tlbnMgPSBhY3RpdmVfdXNlclsidG9rZW5zIl0KICAgICAgICBwYXRoID0gc2VsZi5kZWNveV9iYXNlX3BhdGggKyBkZWNveV9uYW1lICsgIi5qc29uIgoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHdpdGggb3BlbihwYXRoLCAiciIsIGVuY29kaW5nPSJ1dGYtOCIpIGFzIGY6CiAgICAgICAgICAgICAgICBkZWNveV9kYXRhID0ganNvbi5sb2FkKGYpCgogICAgICAgICAgICBkZWNveV9wYWNrYWdlX2RldGFpbCA9IGdldF9wYWNrYWdlX2RldGFpbHMoCiAgICAgICAgICAgICAgICBhcGlfa2V5LAogICAgICAgICAgICAgICAgdG9rZW5zLAogICAgICAgICAgICAgICAgZGVjb3lfZGF0YVsiZmFtaWx5X2NvZGUiXSwKICAgICAgICAgICAgICAgIGRlY295X2RhdGFbInZhcmlhbnRfY29kZSJdLAogICAgICAgICAgICAgICAgZGVjb3lfZGF0YVsib3JkZXIiXSwKICAgICAgICAgICAgICAgIGRlY295X2RhdGFbImlzX2VudGVycHJpc2UiXSwKICAgICAgICAgICAgICAgIGRlY295X2RhdGFbIm1pZ3JhdGlvbl90eXBlIl0sCiAgICAgICAgICAgICkKCiAgICAgICAgICAgIHNlbGYuZGVjb3lzW2RlY295X25hbWVdID0gewogICAgICAgICAgICAgICAgIm9wdGlvbl9jb2RlIjogZGVjb3lfcGFja2FnZV9kZXRhaWxbInBhY2thZ2Vfb3B0aW9uIl1bInBhY2thZ2Vfb3B0aW9uX2NvZGUiXSwKICAgICAgICAgICAgICAgICJsYXN0X2ZldGNoZWRfYXQiOiBpbnQodGltZS50aW1lKCkpLAogICAgICAgICAgICAgICAgInByaWNlIjogZGVjb3lfZGF0YVsicHJpY2UiXSwKICAgICAgICAgICAgfQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgIHJldHVybiBOb25lCgogICAgZGVmIGdldF9kZWNveShzZWxmLCBwYXltZW50X3R5cGU6IHN0cik6CiAgICAgICAgc2VsZi5jaGVja19zdWJzY3JpYmVyX2NoYW5nZSgpCgogICAgICAgIGlmIHBheW1lbnRfdHlwZSBub3QgaW4gc2VsZi5zdXBwb3J0ZWRfcGF5bWVudF90eXBlczoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAgICAgZGVjb3lfbmFtZSA9IHNlbGYucHJlZml4ICsgcGF5bWVudF90eXBlCiAgICAgICAgc2VsZWN0ZWRfZGVjb3kgPSBzZWxmLmRlY295cy5nZXQoZGVjb3lfbmFtZSkKICAgICAgICBpZiBzZWxlY3RlZF9kZWNveSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgICAgICBpZiBpbnQodGltZS50aW1lKCkpIC0gc2VsZWN0ZWRfZGVjb3lbImxhc3RfZmV0Y2hlZF9hdCJdID4gMzAwOgogICAgICAgICAgICBzZWxmLmZldGNoX2RlY295X2RhdGEoZGVjb3lfbmFtZSkKICAgICAgICAgICAgc2VsZWN0ZWRfZGVjb3kgPSBzZWxmLmRlY295cy5nZXQoZGVjb3lfbmFtZSkKCiAgICAgICAgcmV0dXJuIHNlbGVjdGVkX2RlY295CgogICAgZGVmIHJlc2V0X2RlY295cyhzZWxmKToKICAgICAgICBzZWxmLmRlY295cyA9IHNlbGYuaW5pdGlhbF9kZWNveXMuY29weSgpCgoKRGVjb3lJbnN0YW5jZSA9IERlY295UGFja2FnZSgpCg==').decode())
