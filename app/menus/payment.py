#!/usr/bin/env python3
import base64
exec(base64.b64decode('ZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUsIHRpbWVkZWx0YQpmcm9tIGFwcC5jbGllbnQuZW5nc2VsIGltcG9ydCBnZXRfdHJhbnNhY3Rpb25faGlzdG9yeQpmcm9tIGFwcC5tZW51cy51dGlsIGltcG9ydCBjbGVhcl9zY3JlZW4sIHBhdXNlCgpXSURUSCA9IDU1CgoKZGVmIHNob3dfdHJhbnNhY3Rpb25faGlzdG9yeShhcGlfa2V5LCB0b2tlbnMpOgogICAgaW5fdHJhbnNhY3Rpb25fbWVudSA9IFRydWUKCiAgICB3aGlsZSBpbl90cmFuc2FjdGlvbl9tZW51OgogICAgICAgIGNsZWFyX3NjcmVlbigpCiAgICAgICAgcHJpbnQoIj0iICogV0lEVEgpCiAgICAgICAgcHJpbnQoIvCfk5wgUml3YXlhdCBUcmFuc2Frc2kiLmNlbnRlcihXSURUSCkpCiAgICAgICAgcHJpbnQoIj0iICogV0lEVEgpCgogICAgICAgIGhpc3RvcnkgPSBbXQogICAgICAgIHRyeToKICAgICAgICAgICAgZGF0YSA9IGdldF90cmFuc2FjdGlvbl9oaXN0b3J5KGFwaV9rZXksIHRva2VucykKICAgICAgICAgICAgaGlzdG9yeSA9IGRhdGEuZ2V0KCJsaXN0IiwgW10pCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBwcmludChmIvCfkqUgR2FnYWwgYW1iaWwgcml3YXlhdCB0cmFuc2Frc2kgYnJvOiB7ZX0iKQogICAgICAgICAgICBoaXN0b3J5ID0gW10KCiAgICAgICAgaWYgbm90IGhpc3Rvcnk6CiAgICAgICAgICAgIHByaW50KCLinYwgQmVsdW0gYWRhIHJpd2F5YXQgdHJhbnNha3NpIGJyby4iKQogICAgICAgICAgICAjcGF1c2UoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGZvciBpZHgsIHRyYW5zYWN0aW9uIGluIGVudW1lcmF0ZShoaXN0b3J5LCBzdGFydD0xKToKICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uX3RpbWVzdGFtcCA9IHRyYW5zYWN0aW9uLmdldCgidGltZXN0YW1wIiwgMCkKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBkdCA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAodHJhbnNhY3Rpb25fdGltZXN0YW1wKSArIHRpbWVkZWx0YShob3Vycz03KQogICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZF90aW1lID0gZHQuc3RyZnRpbWUoIiVkICVCICVZIHwgJUg6JU0gV0lCIikKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkX3RpbWUgPSAiLSIKCiAgICAgICAgICAgICAgICBwcmljZV92YWwgPSB0cmFuc2FjdGlvbi5nZXQoInByaWNlIiwgMCkKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRfcHJpY2UgPSBmIlJwe2ludChwcmljZV92YWwpOix9Ii5yZXBsYWNlKCIsIiwgIi4iKQogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRfcHJpY2UgPSBzdHIocHJpY2VfdmFsKQoKICAgICAgICAgICAgICAgIHByaW50KGYiW3tpZHh9Ll0ge3RyYW5zYWN0aW9uLmdldCgndGl0bGUnLCctJyl9IC0ge2Zvcm1hdHRlZF9wcmljZX0iKQogICAgICAgICAgICAgICAgcHJpbnQoZiIgIPCfk4UgVGFuZ2dhbDoge2Zvcm1hdHRlZF90aW1lfSIpCiAgICAgICAgICAgICAgICBwcmludChmIiAg8J+SsyBNZXRvZGUgUGVtYmF5YXJhbjoge3RyYW5zYWN0aW9uLmdldCgncGF5bWVudF9tZXRob2RfbGFiZWwnLCctJyl9IikKICAgICAgICAgICAgICAgIHByaW50KGYiICDwn5OmIFN0YXR1cyBUcmFuc2Frc2k6IHt0cmFuc2FjdGlvbi5nZXQoJ3N0YXR1cycsJy0nKX0iKQogICAgICAgICAgICAgICAgcHJpbnQoZiIgIPCfkrAgU3RhdHVzIFBlbWJheWFyYW46IHt0cmFuc2FjdGlvbi5nZXQoJ3BheW1lbnRfc3RhdHVzJywnLScpfSIpCiAgICAgICAgICAgICAgICBwcmludCgiLSIgKiBXSURUSCkKCiAgICAgICAgcHJpbnQoIiBbMC5dIFJlZnJlc2gg8J+UhCIpCiAgICAgICAgcHJpbnQoIlswMC5dIEJhbGlrIGtlIE1lbnUgVXRhbWEiKQogICAgICAgIHByaW50KCItIiAqIFdJRFRIKQogICAgICAgIGNob2ljZSA9IGlucHV0KCJQaWxpaCBvcHNpOiAiKS5zdHJpcCgpCgogICAgICAgIGlmIGNob2ljZSA9PSAiMCI6CiAgICAgICAgICAgIHByaW50KCLwn5SEIFJlZnJlc2hpbmcgdHJhbnNha3NpIGJyby4uLiIpCiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gIjAwIjoKICAgICAgICAgICAgaW5fdHJhbnNhY3Rpb25fbWVudSA9IEZhbHNlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoIuKaoO+4jyBPcHNpIG5nZ2FrIHZhbGlkIGJyby4gQ29iYSBsYWdpIOKcjO+4jyIpCiAgICAgICAgICAgIHBhdXNlKCkK').decode())
