#!/usr/bin/env python3
import base64
exec(base64.b64decode('ZnJvbSByaWNoLmNvbnNvbGUgaW1wb3J0IENvbnNvbGUKZnJvbSByaWNoLnRhYmxlIGltcG9ydCBUYWJsZQpmcm9tIHJpY2gucGFuZWwgaW1wb3J0IFBhbmVsCmZyb20gcmljaC50ZXh0IGltcG9ydCBUZXh0CmZyb20gcmljaC5hbGlnbiBpbXBvcnQgQWxpZ24KZnJvbSByaWNoLmJveCBpbXBvcnQgTUlOSU1BTF9ET1VCTEVfSEVBRApmcm9tIGFwcC5tZW51cy51dGlsIGltcG9ydCBjbGVhcl9zY3JlZW4sIHBhdXNlLCBkaXNwbGF5X2h0bWwKZnJvbSBhcHAubWVudXMudXRpbF9oZWxwZXIgaW1wb3J0IHByaW50X3BhbmVsLCBsaXZlX2xvYWRpbmcsIGdldF9ydXBpYWgKZnJvbSBhcHAuY29uZmlnLnRoZW1lX2NvbmZpZyBpbXBvcnQgZ2V0X3RoZW1lLCB0aGVtZV9zZXRzCmZyb20gYXBwLnNlcnZpY2UuYXV0aCBpbXBvcnQgQXV0aEluc3RhbmNlCmZyb20gYXBwLmNsaWVudC5lbmdzZWwgaW1wb3J0IHNlbmRfYXBpX3JlcXVlc3QsIEJBU0VfQVBJX1VSTCwgQVBJX0tFWSwgVUEsIGphdmFfbGlrZV90aW1lc3RhbXAKZnJvbSBhcHAuY2xpZW50LmVuY3J5cHQgaW1wb3J0IGVuY3J5cHRzaWduX3hkYXRhLCBkZWNyeXB0X3hkYXRhCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lLCB0aW1lem9uZQppbXBvcnQgcmVxdWVzdHMsIGpzb24sIHV1aWQKCmNvbnNvbGUgPSBDb25zb2xlKCkKdGhlbWUgPSBnZXRfdGhlbWUoKQoKCmRlZiBydW5fcG9pbnRfZXhjaGFuZ2UodG9rZW5zOiBkaWN0KToKICAgIHRoZW1lID0gZ2V0X3RoZW1lKCkKICAgIHdoaWxlIFRydWU6CiAgICAgICAgcmVzdWx0ID0gcnVuX3BvaW50X2V4Y2hhbmdlX29uY2UodG9rZW5zKQogICAgICAgIGlmIHJlc3VsdCA9PSAiQkFDSyI6CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgZWxpZiByZXN1bHQgPT0gIk1BSU4iOgogICAgICAgICAgICBicmVhawogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGJyZWFrCgpkZWYgcnVuX3BvaW50X2V4Y2hhbmdlX29uY2UodG9rZW5zOiBkaWN0KToKICAgIGNsZWFyX3NjcmVlbigpCiAgICB0aGVtZSA9IGdldF90aGVtZSgpCiAgICBhY2Nlc3NfY29kZSA9IGNvbnNvbGUuaW5wdXQoZiJbe3RoZW1lWyd0ZXh0X3N1YiddfV1NYXN1a2thbiBrb2RlIGFrc2VzOlsve3RoZW1lWyd0ZXh0X3N1YiddfV0gIikuc3RyaXAoKQogICAgaWYgYWNjZXNzX2NvZGUgIT0gdGhlbWVfc2V0czoKICAgICAgICBwcmludF9wYW5lbCgi8J+UkiBEaXRvbGFrIiwgIktvZGUgYWtzZXMgc2FsYWguIEFuZGEgdGlkYWsgZGFwYXQgbWVsYW5qdXRrYW4uIikKICAgICAgICBwYXVzZSgpCiAgICAgICAgcmV0dXJuCgogICAgY2xlYXJfc2NyZWVuKCkKICAgIHRoZW1lID0gZ2V0X3RoZW1lKCkKICAgIGNvbnNvbGUucHJpbnQoUGFuZWwoCiAgICAgICAgQWxpZ24uY2VudGVyKCLwn46BIEthdGFsb2cgUmV3YXJkIFBvaW4iLCB2ZXJ0aWNhbD0ibWlkZGxlIiksCiAgICAgICAgYm9yZGVyX3N0eWxlPXRoZW1lWyJib3JkZXJfaW5mbyJdLAogICAgICAgIHBhZGRpbmc9KDEsIDIpLAogICAgICAgIGV4cGFuZD1UcnVlCiAgICApKQoKICAgIGFwaV9rZXkgPSBBdXRoSW5zdGFuY2UuYXBpX2tleQogICAgaWRfdG9rZW4gPSB0b2tlbnMuZ2V0KCJpZF90b2tlbiIpCgogICAgY2F0YWxvZyA9IGZldGNoX2NhdGFsb2coYXBpX2tleSwgaWRfdG9rZW4pCiAgICBpZiBub3QgY2F0YWxvZzoKICAgICAgICByZXR1cm4KCiAgICB0aGVtZSA9IGdldF90aGVtZSgpCiAgICBuYXZfdGFibGUgPSBUYWJsZShzaG93X2hlYWRlcj1GYWxzZSwgYm94PU1JTklNQUxfRE9VQkxFX0hFQUQsIGV4cGFuZD1UcnVlKQogICAgbmF2X3RhYmxlLmFkZF9jb2x1bW4oanVzdGlmeT0icmlnaHQiLCBzdHlsZT10aGVtZVsidGV4dF9rZXkiXSwgd2lkdGg9NikKICAgIG5hdl90YWJsZS5hZGRfY29sdW1uKGp1c3RpZnk9ImxlZnQiLCBzdHlsZT10aGVtZVsidGV4dF9ib2R5Il0pCiAgICBuYXZfdGFibGUuYWRkX3JvdygiMDAiLCBmIlt7dGhlbWVbJ3RleHRfc3ViJ119XUJhdGFsIGRhbiBrZW1iYWxpIGtlIG1lbnUgdXRhbWFbL10iKQogICAgY29uc29sZS5wcmludChQYW5lbChuYXZfdGFibGUsYm9yZGVyX3N0eWxlPXRoZW1lWyJib3JkZXJfaW5mbyJdLCBleHBhbmQ9VHJ1ZSkpCgogICAgY2hvaWNlID0gY29uc29sZS5pbnB1dChmIlt7dGhlbWVbJ3RleHRfc3ViJ119XVBpbGloIG5vbW9yIHJld2FyZDpbL3t0aGVtZVsndGV4dF9zdWInXX1dICIpLnN0cmlwKCkKICAgIGlmIGNob2ljZSA9PSAiMDAiOgogICAgICAgIHJldHVybiAiTUFJTiIKICAgIGlmIG5vdCBjaG9pY2UuaXNkaWdpdCgpIG9yIG5vdCAoMSA8PSBpbnQoY2hvaWNlKSA8PSBsZW4oY2F0YWxvZykpOgogICAgICAgIHByaW50X3BhbmVsKCLimqDvuI8gRXJyb3IiLCAiUGlsaWhhbiB0aWRhayB2YWxpZC4iKQogICAgICAgIHBhdXNlKCkKICAgICAgICByZXR1cm4gIkJBQ0siCgogICAgaXRlbSA9IGNhdGFsb2dbaW50KGNob2ljZSkgLSAxXQogICAgd2l0aCBsaXZlX2xvYWRpbmcoIk1lbmdhbWJpbCBkZXRhaWwgcmV3YXJkLi4uIiwgdGhlbWUpOgogICAgICAgIGRldGFpbCA9IGZldGNoX2RldGFpbChhcGlfa2V5LCBpZF90b2tlbiwgaXRlbVsiY29kZSJdKQogICAgaWYgbm90IGRldGFpbDoKICAgICAgICByZXR1cm4gIkJBQ0siCgogICAgY2xlYXJfc2NyZWVuKCkKICAgIHRoZW1lID0gZ2V0X3RoZW1lKCkKICAgIG9wdGlvbiA9IGRldGFpbFsicGFja2FnZV9vcHRpb24iXQoKICAgIGluZm9fdGFibGUgPSBUYWJsZS5ncmlkKHBhZGRpbmc9KDAsIDEpKQogICAgaW5mb190YWJsZS5hZGRfY29sdW1uKGp1c3RpZnk9ImxlZnQiLCBzdHlsZT10aGVtZVsidGV4dF9ib2R5Il0pCiAgICBpbmZvX3RhYmxlLmFkZF9jb2x1bW4oanVzdGlmeT0ibGVmdCIpCiAgICBpbmZvX3RhYmxlLmFkZF9yb3coIk5hbWEiLCBmIjogW2JvbGQge3RoZW1lWyd0ZXh0X2JvZHknXX1de29wdGlvblsnbmFtZSddfVsvXSIpCiAgICBpbmZvX3RhYmxlLmFkZF9yb3coIkhhcmdhIiwgZiI6IFt7dGhlbWVbJ3RleHRfbW9uZXknXX1de29wdGlvblsncHJpY2UnXX1bL10gUG9pbnQiKQogICAgaW5mb190YWJsZS5hZGRfcm93KCJNYXNhIEFrdGlmIiwgZiI6IFt7dGhlbWVbJ3RleHRfZGF0ZSddfV17b3B0aW9uLmdldCgndmFsaWRpdHknLCAnLScpfSIpCiAgICBpbmZvX3RhYmxlLmFkZF9yb3coIkJlbmVmaXQiLCBmIjogW3t0aGVtZVsndGV4dF9ib2R5J119XXtsZW4ob3B0aW9uLmdldCgnYmVuZWZpdHMnLCBbXSkpfSBpdGVtIikKICAgIGNvbnNvbGUucHJpbnQoUGFuZWwoaW5mb190YWJsZSwgdGl0bGU9IvCfk6YgRGV0YWlsIFJld2FyZCIsIGJvcmRlcl9zdHlsZT10aGVtZVsiYm9yZGVyX2luZm8iXSwgZXhwYW5kPVRydWUpKQoKICAgIGJlbmVmaXRzID0gb3B0aW9uLmdldCgiYmVuZWZpdHMiLCBbXSkKICAgIGlmIGJlbmVmaXRzOgogICAgICAgIGJlbmVmaXRfdGFibGUgPSBUYWJsZShib3g9TUlOSU1BTF9ET1VCTEVfSEVBRCwgZXhwYW5kPVRydWUpCiAgICAgICAgYmVuZWZpdF90YWJsZS5hZGRfY29sdW1uKCJOYW1hIiwgc3R5bGU9dGhlbWVbInRleHRfYm9keSJdKQogICAgICAgIGJlbmVmaXRfdGFibGUuYWRkX2NvbHVtbigiSmVuaXMiLCBzdHlsZT10aGVtZVsidGV4dF9ib2R5Il0pCiAgICAgICAgYmVuZWZpdF90YWJsZS5hZGRfY29sdW1uKCJVbmxpIiwgc3R5bGU9dGhlbWVbImJvcmRlcl9pbmZvIl0sIGp1c3RpZnk9ImNlbnRlciIpCiAgICAgICAgYmVuZWZpdF90YWJsZS5hZGRfY29sdW1uKCJUb3RhbCIsIHN0eWxlPXRoZW1lWyJ0ZXh0X2JvZHkiXSwganVzdGlmeT0icmlnaHQiKQogICAgICAgIGZvciBiIGluIGJlbmVmaXRzOgogICAgICAgICAgICBkdCA9IGJbImRhdGFfdHlwZSJdCiAgICAgICAgICAgIHRvdGFsID0gYlsidG90YWwiXQogICAgICAgICAgICBpc191bmxpID0gYlsiaXNfdW5saW1pdGVkIl0KICAgICAgICAgICAgaWYgaXNfdW5saToKICAgICAgICAgICAgICAgIHRvdGFsX3N0ciA9IHsiVk9JQ0UiOiAibWVuaXQiLCAiVEVYVCI6ICJTTVMiLCAiREFUQSI6ICJrdW90YSJ9LmdldChkdCwgZHQpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBkdCA9PSAiVk9JQ0UiOgogICAgICAgICAgICAgICAgICAgIHRvdGFsX3N0ciA9IGYie3RvdGFsIC8gNjA6LjBmfSBtZW5pdCIKICAgICAgICAgICAgICAgIGVsaWYgZHQgPT0gIlRFWFQiOgogICAgICAgICAgICAgICAgICAgIHRvdGFsX3N0ciA9IGYie3RvdGFsfSBTTVMiCiAgICAgICAgICAgICAgICBlbGlmIGR0ID09ICJEQVRBIjoKICAgICAgICAgICAgICAgICAgICBpZiB0b3RhbCA+PSAxXzAwMF8wMDBfMDAwOgogICAgICAgICAgICAgICAgICAgICAgICB0b3RhbF9zdHIgPSBmInt0b3RhbCAvICgxMDI0ICoqIDMpOi4yZn0gR0IiCiAgICAgICAgICAgICAgICAgICAgZWxpZiB0b3RhbCA+PSAxXzAwMF8wMDA6CiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsX3N0ciA9IGYie3RvdGFsIC8gKDEwMjQgKiogMik6LjJmfSBNQiIKICAgICAgICAgICAgICAgICAgICBlbGlmIHRvdGFsID49IDFfMDAwOgogICAgICAgICAgICAgICAgICAgICAgICB0b3RhbF9zdHIgPSBmInt0b3RhbCAvIDEwMjQ6LjJmfSBLQiIKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0b3RhbF9zdHIgPSBmInt0b3RhbH0gQiIKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgdG90YWxfc3RyID0gZiJ7dG90YWx9ICh7ZHR9KSIKICAgICAgICAgICAgYmVuZWZpdF90YWJsZS5hZGRfcm93KGJbIm5hbWUiXSwgZHQsICJZRVMiIGlmIGlzX3VubGkgZWxzZSAiLSIsIHRvdGFsX3N0cikKCiAgICAgICAgY29uc29sZS5wcmludChQYW5lbChiZW5lZml0X3RhYmxlLCB0aXRsZT0i8J+OgSBCZW5lZml0IFJld2FyZCIsIGJvcmRlcl9zdHlsZT10aGVtZVsiYm9yZGVyX3N1Y2Nlc3MiXSwgcGFkZGluZz0oMCwgMCksIGV4cGFuZD1UcnVlKSkKCiAgICBodG1sX3RuYyA9IG9wdGlvbi5nZXQoInRuYyIsICIiKQogICAgY2xlYW5fdGV4dCA9IGRpc3BsYXlfaHRtbChodG1sX3RuYywgd2lkdGg9ODApCiAgICB0bmNfdGV4dCA9IFRleHQoY2xlYW5fdGV4dCwgc3R5bGU9dGhlbWVbInRleHRfYm9keSJdKQogICAgY29uc29sZS5wcmludChQYW5lbCh0bmNfdGV4dCwgdGl0bGU9IvCfk5wgU3lhcmF0ICYgS2V0ZW50dWFuIiwgYm9yZGVyX3N0eWxlPXRoZW1lWyJib3JkZXJfd2FybmluZyJdLCBleHBhbmQ9VHJ1ZSkpCgogICAgbmF2X3RhYmxlID0gVGFibGUoc2hvd19oZWFkZXI9RmFsc2UsIGJveD1NSU5JTUFMX0RPVUJMRV9IRUFELCBleHBhbmQ9VHJ1ZSkKICAgIG5hdl90YWJsZS5hZGRfY29sdW1uKGp1c3RpZnk9InJpZ2h0Iiwgc3R5bGU9dGhlbWVbInRleHRfa2V5Il0sIHdpZHRoPTYpCiAgICBuYXZfdGFibGUuYWRkX2NvbHVtbihqdXN0aWZ5PSJsZWZ0Iiwgc3R5bGU9dGhlbWVbInRleHRfYm9keSJdKQogICAgbmF2X3RhYmxlLmFkZF9yb3coIjEiLCAiVHVrYXIgcG9pbiBzZWthcmFuZyIpCiAgICBuYXZfdGFibGUuYWRkX3JvdygiMDAiLCAiS2VtYmFsaSBrZSBkYWZ0YXIgcmV3YXJkIikKICAgIG5hdl90YWJsZS5hZGRfcm93KCI5OSIsIGYiW3t0aGVtZVsndGV4dF9zdWInXX1dS2VtYmFsaSBrZSBtZW51IHV0YW1hWy9dIikKICAgIGNvbnNvbGUucHJpbnQoUGFuZWwobmF2X3RhYmxlLCBib3JkZXJfc3R5bGU9dGhlbWVbImJvcmRlcl9pbmZvIl0sIGV4cGFuZD1UcnVlKSkKCiAgICB3aGlsZSBUcnVlOgogICAgICAgIG5hdl9jaG9pY2UgPSBjb25zb2xlLmlucHV0KGYiW3t0aGVtZVsndGV4dF9zdWInXX1dUGlsaWhhbiBBbmRhOlsve3RoZW1lWyd0ZXh0X3N1YiddfV0gIikuc3RyaXAoKQogICAgICAgIGlmIG5hdl9jaG9pY2UgPT0gIjEiOgogICAgICAgICAgICBzZXR0bGVtZW50X2V4Y2hhbmdlX3BvaW4oCiAgICAgICAgICAgICAgICBhcGlfa2V5PWFwaV9rZXksCiAgICAgICAgICAgICAgICB0b2tlbnM9dG9rZW5zLAogICAgICAgICAgICAgICAgcGFja2FnZV9jb2RlPWl0ZW1bImNvZGUiXSwKICAgICAgICAgICAgICAgIHByaWNlPW9wdGlvblsicHJpY2UiXSwKICAgICAgICAgICAgICAgIHRva2VuX2NvbmZpcm1hdGlvbj1kZXRhaWxbInRva2VuX2NvbmZpcm1hdGlvbiJdLAogICAgICAgICAgICAgICAgdHNfdG9fc2lnbj1kZXRhaWxbInRpbWVzdGFtcCJdCiAgICAgICAgICAgICkKICAgICAgICAgICAgcGF1c2UoKQogICAgICAgICAgICByZXR1cm4KICAgICAgICBlbGlmIG5hdl9jaG9pY2UgPT0gIjAwIjoKICAgICAgICAgICAgcmV0dXJuICJCQUNLIgogICAgICAgIGVsaWYgbmF2X2Nob2ljZSA9PSAiOTkiOgogICAgICAgICAgICByZXR1cm4gIk1BSU4iCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnRfcGFuZWwoIuKaoO+4jyBFcnJvciIsICJQaWxpaGFuIHRpZGFrIHZhbGlkLiBTaWxha2FuIHBpbGloIDEsIDAwLCBhdGF1IDk5LiIpCgpkZWYgZmV0Y2hfZGV0YWlsKGFwaV9rZXksIGlkX3Rva2VuLCBwYWNrYWdlX2NvZGUpOgogICAgcGF0aCA9ICJhcGkvdjgveGwtc3RvcmVzL29wdGlvbnMvZGV0YWlsIgogICAgcGF5bG9hZCA9IHsKICAgICAgICAiaXNfZW50ZXJwcmlzZSI6IEZhbHNlLAogICAgICAgICJsYW5nIjogImlkIiwKICAgICAgICAicGFja2FnZV9vcHRpb25fY29kZSI6IHBhY2thZ2VfY29kZQogICAgfQogICAgcmVzID0gc2VuZF9hcGlfcmVxdWVzdChhcGlfa2V5LCBwYXRoLCBwYXlsb2FkLCBpZF90b2tlbikKICAgIGlmIHJlcy5nZXQoInN0YXR1cyIpICE9ICJTVUNDRVNTIjoKICAgICAgICBwcmludF9wYW5lbCgi4pqg77iPIEVycm9yIiwgIkdhZ2FsIG1lbmdhbWJpbCBkZXRhaWwgcGFrZXQuIikKICAgICAgICByZXR1cm4gTm9uZQogICAgcmV0dXJuIHJlc1siZGF0YSJdCgpkZWYgZmV0Y2hfY2F0YWxvZyhhcGlfa2V5LCBpZF90b2tlbik6CiAgICB0aGVtZSA9IGdldF90aGVtZSgpCiAgICBwYXRoID0gImdhbWlmaWNhdGlvbi9hcGkvdjgvbG95YWx0aWVzL3RpZXJpbmcvcmV3YXJkcy1jYXRhbG9nIgogICAgcGF5bG9hZCA9IHsiaXNfZW50ZXJwcmlzZSI6IEZhbHNlLCAibGFuZyI6ICJpZCJ9CiAgICB3aXRoIGxpdmVfbG9hZGluZygiTWVtdWF0IGthdGFsb2cgcmV3YXJkLi4uIiwgdGhlbWUpOgogICAgICAgIHJlcyA9IHNlbmRfYXBpX3JlcXVlc3QoYXBpX2tleSwgcGF0aCwgcGF5bG9hZCwgaWRfdG9rZW4pCgogICAgaWYgcmVzLmdldCgic3RhdHVzIikgIT0gIlNVQ0NFU1MiOgogICAgICAgIHByaW50X3BhbmVsKCLimqDvuI8gRXJyb3IiLCAiR2FnYWwgbWVuZ2FtYmlsIGthdGFsb2cgcmV3YXJkLiIpCiAgICAgICAgcmV0dXJuIFtdCiAgICBjYXRhbG9nID0gW10KICAgIHBvaW50cyA9IHJlc1siZGF0YSJdWyJ0aWVycyJdWzBdWyJwb2ludHMiXQogICAgdGFibGUgPSBUYWJsZShib3g9TUlOSU1BTF9ET1VCTEVfSEVBRCwgZXhwYW5kPVRydWUpCiAgICB0YWJsZS5hZGRfY29sdW1uKCJObyIsIGp1c3RpZnk9InJpZ2h0Iiwgc3R5bGU9dGhlbWVbInRleHRfa2V5Il0sIHdpZHRoPTQpCiAgICB0YWJsZS5hZGRfY29sdW1uKCJOYW1hIFJld2FyZCIsIHN0eWxlPXRoZW1lWyJ0ZXh0X2JvZHkiXSkKICAgIHRhYmxlLmFkZF9jb2x1bW4oIkhhcmdhIiwganVzdGlmeT0icmlnaHQiLCBzdHlsZT10aGVtZVsidGV4dF9tb25leSJdLCB3aWR0aD0xMCkKICAgIGZvciBpLCBpdGVtIGluIGVudW1lcmF0ZShwb2ludHMsIHN0YXJ0PTEpOgogICAgICAgIHRhYmxlLmFkZF9yb3coc3RyKGkpLCBpdGVtWyJ0aXRsZSJdLCBmIntpdGVtWydwcmljZSddfSBQb2luIikKICAgICAgICBjYXRhbG9nLmFwcGVuZCh7CiAgICAgICAgICAgICJjb2RlIjogaXRlbVsiY29kZSJdLAogICAgICAgICAgICAidGl0bGUiOiBpdGVtWyJ0aXRsZSJdLAogICAgICAgICAgICAicHJpY2UiOiBpdGVtWyJwcmljZSJdLAogICAgICAgICAgICAiYmVuZWZpdF9jb2RlIjogaXRlbS5nZXQoImJlbmVmaXRfY29kZSIsICIiKSwKICAgICAgICAgICAgInZhbGlkaXR5IjogaXRlbS5nZXQoInZhbGlkaXR5IiwgIiIpLAogICAgICAgICAgICAiZXhwaXJhdGlvbl9kYXRlIjogaXRlbS5nZXQoImV4cGlyYXRpb25fZGF0ZSIsIDApCiAgICAgICAgfSkKICAgIGNvbnNvbGUucHJpbnQoUGFuZWwodGFibGUsIGJvcmRlcl9zdHlsZT10aGVtZVsiYm9yZGVyX3ByaW1hcnkiXSwgZXhwYW5kPVRydWUpKQogICAgcmV0dXJuIGNhdGFsb2cKCmRlZiBnZXRfeF9zaWduYXR1cmVfZXhjaGFuZ2VfcG9pbihwYWNrYWdlX2NvZGUsIHRva2VuX2NvbmZpcm1hdGlvbiwgcGF0aCwgbWV0aG9kLCB0aW1lc3RhbXApOgogICAgU0VSVkVSX1VSTCA9ICJodHRwczovL2ZsYXNrLXBvaW4ub25yZW5kZXIuY29tL2dldC1zaWduYXR1cmUtcG9pbnQiCiAgICBwYXlsb2FkID0gewogICAgICAgICJwYWNrYWdlX2NvZGUiOiBwYWNrYWdlX2NvZGUsCiAgICAgICAgInRva2VuX2NvbmZpcm1hdGlvbiI6IHRva2VuX2NvbmZpcm1hdGlvbiwKICAgICAgICAicGF0aCI6IHBhdGgsCiAgICAgICAgIm1ldGhvZCI6IG1ldGhvZCwKICAgICAgICAidGltZXN0YW1wIjogdGltZXN0YW1wLAogICAgfQogICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KFNFUlZFUl9VUkwsIGpzb249cGF5bG9hZCkKICAgIHJlc3BvbnNlLnJhaXNlX2Zvcl9zdGF0dXMoKQogICAgZGF0YSA9IHJlc3BvbnNlLmpzb24oKQogICAgaWYgInNpZ25hdHVyZSIgbm90IGluIGRhdGE6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIkludmFsaWQgcmVzcG9uc2U6IHtkYXRhfSIpCiAgICByZXR1cm4gZGF0YVsic2lnbmF0dXJlIl0KCmRlZiBzZXR0bGVtZW50X2V4Y2hhbmdlX3BvaW4oYXBpX2tleSwgdG9rZW5zLCB0b2tlbl9jb25maXJtYXRpb24sIHRzX3RvX3NpZ24sIHBhY2thZ2VfY29kZSwgcHJpY2UpOgogICAgcGF0aCA9ICJnYW1pZmljYXRpb24vYXBpL3Y4L2xveWFsdGllcy90aWVyaW5nL2V4Y2hhbmdlIgogICAgcGF5bG9hZCA9IHsKICAgICAgICAiYW1vdW50IjogIjAiLAogICAgICAgICJpc19lbnRlcnByaXNlIjogRmFsc2UsCiAgICAgICAgIml0ZW1fY29kZSI6IHBhY2thZ2VfY29kZSwKICAgICAgICAiaXRlbV9uYW1lIjogIiIsCiAgICAgICAgImxhbmciOiAiaWQiLAogICAgICAgICJwYXJ0bmVyIjogIiIsCiAgICAgICAgInBvaW50cyI6IHByaWNlLAogICAgICAgICJ0aW1lc3RhbXAiOiB0c190b19zaWduLAogICAgICAgICJ0b2tlbl9jb25maXJtYXRpb24iOiB0b2tlbl9jb25maXJtYXRpb24KICAgIH0KICAgIGVuY3J5cHRlZCA9IGVuY3J5cHRzaWduX3hkYXRhKGFwaV9rZXksICJQT1NUIiwgcGF0aCwgdG9rZW5zWyJpZF90b2tlbiJdLCBwYXlsb2FkKQogICAgeHRpbWUgPSBpbnQoZW5jcnlwdGVkWyJlbmNyeXB0ZWRfYm9keSJdWyJ4dGltZSJdKQogICAgc2lnX3RpbWVfc2VjID0geHRpbWUgLy8gMTAwMAogICAgeF9yZXF1ZXN0ZWRfYXQgPSBkYXRldGltZS5mcm9tdGltZXN0YW1wKHNpZ190aW1lX3NlYywgdHo9dGltZXpvbmUudXRjKS5hc3RpbWV6b25lKCkKICAgIHhfc2lnID0gZ2V0X3hfc2lnbmF0dXJlX2V4Y2hhbmdlX3BvaW4ocGFja2FnZV9jb2RlLCB0b2tlbl9jb25maXJtYXRpb24sIHBhdGgsICJQT1NUIiwgdHNfdG9fc2lnbikKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgImhvc3QiOiBCQVNFX0FQSV9VUkwucmVwbGFjZSgiaHR0cHM6Ly8iLCAiIiksCiAgICAgICAgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04IiwKICAgICAgICAidXNlci1hZ2VudCI6IFVBLAogICAgICAgICJ4LWFwaS1rZXkiOiBBUElfS0VZLAogICAgICAgICJhdXRob3JpemF0aW9uIjogZiJCZWFyZXIge3Rva2Vuc1snaWRfdG9rZW4nXX0iLAogICAgICAgICJ4LWh2IjogInYzIiwKICAgICAgICAieC1zaWduYXR1cmUtdGltZSI6IHN0cihzaWdfdGltZV9zZWMpLAogICAgICAgICJ4LXNpZ25hdHVyZSI6IHhfc2lnLAogICAgICAgICJ4LXJlcXVlc3QtaWQiOiBzdHIodXVpZC51dWlkNCgpKSwKICAgICAgICAieC1yZXF1ZXN0LWF0IjogamF2YV9saWtlX3RpbWVzdGFtcCh4X3JlcXVlc3RlZF9hdCksCiAgICAgICAgIngtdmVyc2lvbi1hcHAiOiAiOC43LjAiLAogICAgfQogICAgdXJsID0gZiJ7QkFTRV9BUElfVVJMfS97cGF0aH0iCiAgICB3aXRoIGxpdmVfbG9hZGluZygi4o+zIE1lbnVrYXJrYW4gcG9pbi4uLiIsIHRoZW1lKToKICAgICAgICByZXNwID0gcmVxdWVzdHMucG9zdCh1cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGVuY3J5cHRlZFsiZW5jcnlwdGVkX2JvZHkiXSksIHRpbWVvdXQ9MzApCiAgICB0cnk6CiAgICAgICAgZGVjcnlwdGVkID0gZGVjcnlwdF94ZGF0YShhcGlfa2V5LCBqc29uLmxvYWRzKHJlc3AudGV4dCkpCiAgICAgICAgaWYgZGVjcnlwdGVkWyJzdGF0dXMiXSAhPSAiU1VDQ0VTUyI6CiAgICAgICAgICAgIHByaW50X3BhbmVsKCLimqDvuI8gR2FnYWwiLCBmIkdhZ2FsIGtsYWltIHJld2FyZDoge2RlY3J5cHRlZH0iKQogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIHByaW50X3BhbmVsKCLinIUgU3Vrc2VzIiwgIlJld2FyZCBiZXJoYXNpbCBkaWtsYWltISIpCiAgICAgICAgcmV0dXJuIGRlY3J5cHRlZAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50X3BhbmVsKCLimqDvuI8gRXJyb3IiLCBmIkdhZ2FsIG1lbmRla3JpcHNpIHJlc3BvbnM6IHtlfSIpCiAgICAgICAgcmV0dXJuIHJlc3AudGV4dAo=').decode())
