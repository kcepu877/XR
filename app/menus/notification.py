#!/usr/bin/env python3
import base64
exec(base64.b64decode('ZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUsIHRpbWVkZWx0YQpmcm9tIGFwcC5tZW51cy51dGlsIGltcG9ydCBjbGVhcl9zY3JlZW4sIHBhdXNlCmZyb20gYXBwLmNsaWVudC5lbmdzZWwgaW1wb3J0IGdldF9ub3RpZmljYXRpb25fZGV0YWlsLCBkYXNoYm9hcmRfc2VnbWVudHMKZnJvbSBhcHAuc2VydmljZS5hdXRoIGltcG9ydCBBdXRoSW5zdGFuY2UKCldJRFRIID0gNTUKCgpkZWYgZm9ybWF0X3RpbWVzdGFtcCh0cyk6CiAgICBpZiB0cyBpcyBOb25lIG9yIHRzID09ICIiOgogICAgICAgIHJldHVybiAiLSIKICAgIHRyeToKICAgICAgICBpZiBpc2luc3RhbmNlKHRzLCAoaW50LCBmbG9hdCkpOgogICAgICAgICAgICBkdCA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAodHMpICsgdGltZWRlbHRhKGhvdXJzPTcpCiAgICAgICAgICAgIHJldHVybiBkdC5zdHJmdGltZSgiJWQgJUIgJVkgfCAlSDolTSBXSUIiKQogICAgICAgIGVsaWYgaXNpbnN0YW5jZSh0cywgc3RyKSBhbmQgdHMuaXNkaWdpdCgpOgogICAgICAgICAgICBkdCA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAoaW50KHRzKSkgKyB0aW1lZGVsdGEoaG91cnM9NykKICAgICAgICAgICAgcmV0dXJuIGR0LnN0cmZ0aW1lKCIlZCAlQiAlWSB8ICVIOiVNIFdJQiIpCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHRzLCBzdHIpOgogICAgICAgICAgICBkdCA9IGRhdGV0aW1lLmZyb21pc29mb3JtYXQodHMucmVwbGFjZSgiWiIsICIrMDA6MDAiKSkgKyB0aW1lZGVsdGEoaG91cnM9NykKICAgICAgICAgICAgcmV0dXJuIGR0LnN0cmZ0aW1lKCIlZCAlQiAlWSB8ICVIOiVNIFdJQiIpCiAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgIHJldHVybiAiLSIKICAgIHJldHVybiAiLSIKCgpkZWYgc2hvd19ub3RpZmljYXRpb25fbWVudSgpOgogICAgaW5fbm90aWZpY2F0aW9uX21lbnUgPSBUcnVlCiAgICB3aGlsZSBpbl9ub3RpZmljYXRpb25fbWVudToKICAgICAgICBjbGVhcl9zY3JlZW4oKQogICAgICAgIHByaW50KCLwn5SNIExhZ2kgYW1iaWwgbm90aWZpa2FzaSBicm8uLi4iKQoKICAgICAgICBhcGlfa2V5ID0gQXV0aEluc3RhbmNlLmFwaV9rZXkKICAgICAgICB0b2tlbnMgPSBBdXRoSW5zdGFuY2UuZ2V0X2FjdGl2ZV90b2tlbnMoKQoKICAgICAgICBub3RpZmljYXRpb25zX3JlcyA9IGRhc2hib2FyZF9zZWdtZW50cyhhcGlfa2V5LCB0b2tlbnMpCiAgICAgICAgaWYgbm90IG5vdGlmaWNhdGlvbnNfcmVzOgogICAgICAgICAgICBwcmludCgi4p2MIE5nZ2FrIGFkYSBub3RpZmlrYXNpIGJyby4iKQogICAgICAgICAgICBwYXVzZSgpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBub3RpZmljYXRpb25zID0gbm90aWZpY2F0aW9uc19yZXMuZ2V0KCJkYXRhIiwge30pLmdldCgibm90aWZpY2F0aW9uIiwge30pLmdldCgiZGF0YSIsIFtdKQogICAgICAgIGlmIG5vdCBub3RpZmljYXRpb25zOgogICAgICAgICAgICBwcmludCgi4pqg77iPIEJlbHVtIGFkYSBub3RpZmlrYXNpIGJyby4iKQogICAgICAgICAgICBwYXVzZSgpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBwcmludCgiPSIgKiBXSURUSCkKICAgICAgICBwcmludCgi8J+UlCBEYWZ0YXIgTm90aWZpa2FzaSIuY2VudGVyKFdJRFRIKSkKICAgICAgICBwcmludCgiPSIgKiBXSURUSCkKICAgICAgICB1bnJlYWRfY291bnQgPSAwCiAgICAgICAgZm9yIGlkeCwgbm90aWZpY2F0aW9uIGluIGVudW1lcmF0ZShub3RpZmljYXRpb25zKToKICAgICAgICAgICAgaXNfcmVhZCA9IG5vdGlmaWNhdGlvbi5nZXQoImlzX3JlYWQiLCBGYWxzZSkKICAgICAgICAgICAgZnVsbF9tZXNzYWdlID0gbm90aWZpY2F0aW9uLmdldCgiZnVsbF9tZXNzYWdlIiwgIi0iKQogICAgICAgICAgICBmb3JtYXR0ZWRfdGltZSA9IGZvcm1hdF90aW1lc3RhbXAobm90aWZpY2F0aW9uLmdldCgidGltZXN0YW1wIikpCgogICAgICAgICAgICBzdGF0dXMgPSAi4pyFIFJFQUQiIGlmIGlzX3JlYWQgZWxzZSAi8J+UlCBVTlJFQUQiCiAgICAgICAgICAgIGlmIG5vdCBpc19yZWFkOgogICAgICAgICAgICAgICAgdW5yZWFkX2NvdW50ICs9IDEKCiAgICAgICAgICAgIHByaW50KGYiW3tpZHggKyAxfS5dIFN0YXR1czoge3N0YXR1c30iKQogICAgICAgICAgICBwcmludChmIiDwn5OFIFdha3R1OiB7Zm9ybWF0dGVkX3RpbWV9IikKICAgICAgICAgICAgcHJpbnQoZiIg8J+TnSBQZXNhbjoge2Z1bGxfbWVzc2FnZX0iKQogICAgICAgICAgICBwcmludCgiLSIgKiBXSURUSCkKCiAgICAgICAgcHJpbnQoZiLwn5OKIFRvdGFsOiB7bGVuKG5vdGlmaWNhdGlvbnMpfSB8IFVucmVhZDoge3VucmVhZF9jb3VudH0iKQogICAgICAgIHByaW50KCI9IiAqIFdJRFRIKQogICAgICAgIHByaW50KCIgWzAuXSBSZWZyZXNoIPCflIQiKQogICAgICAgIHByaW50KCIgWzEuXSBUYW5kYWkgc2VtdWEgVW5yZWFkIGphZGkgUmVhZCDinIUiKQogICAgICAgIHByaW50KCJbMDAuXSBCYWxpayBrZSBNZW51IFV0YW1hIikKICAgICAgICBwcmludCgiPSIgKiBXSURUSCkKCiAgICAgICAgY2hvaWNlID0gaW5wdXQoIlBpbGloIG9wc2k6ICIpLnN0cmlwKCkKICAgICAgICBpZiBjaG9pY2UgPT0gIjAiOgogICAgICAgICAgICBwcmludCgi8J+UhCBSZWZyZXNoaW5nIG5vdGlmaWthc2kgYnJvLi4uIikKICAgICAgICAgICAgY29udGludWUKICAgICAgICBlbGlmIGNob2ljZSA9PSAiMSI6CiAgICAgICAgICAgIGZvciBub3RpZmljYXRpb24gaW4gbm90aWZpY2F0aW9uczoKICAgICAgICAgICAgICAgIGlmIG5vdGlmaWNhdGlvbi5nZXQoImlzX3JlYWQiLCBGYWxzZSk6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbl9pZCA9IG5vdGlmaWNhdGlvbi5nZXQoIm5vdGlmaWNhdGlvbl9pZCIpCiAgICAgICAgICAgICAgICBkZXRhaWwgPSBnZXRfbm90aWZpY2F0aW9uX2RldGFpbChhcGlfa2V5LCB0b2tlbnMsIG5vdGlmaWNhdGlvbl9pZCkKICAgICAgICAgICAgICAgIGlmIGRldGFpbDoKICAgICAgICAgICAgICAgICAgICBwcmludChmIuKchSBOb3RpZmlrYXNpIHtub3RpZmljYXRpb25faWR9IGRpdGFuZGFpIHNlYmFnYWkgUkVBRCBicm8uIikKICAgICAgICAgICAgcGF1c2UoKQogICAgICAgIGVsaWYgY2hvaWNlID09ICIwMCI6CiAgICAgICAgICAgIGluX25vdGlmaWNhdGlvbl9tZW51ID0gRmFsc2UKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgi4pqg77iPIElucHV0IG5nZ2FrIHZhbGlkIGJyby4gQ29iYSBsYWdpIOKcjO+4jyIpCiAgICAgICAgICAgIHBhdXNlKCkK').decode())
